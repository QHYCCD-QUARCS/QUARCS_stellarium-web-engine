{"remainingRequest":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/thread-loader/dist/cjs.js!/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/babel-loader/lib/index.js!/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/location-mgr.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/location-mgr.vue","mtime":1749458942000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1707125360000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/babel-loader/lib/index.js","mtime":1707125360000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js","mtime":1707125450000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3F1YXJjcy93b3Jrc3BhY2UvUVVBUkNTL1FVQVJDU19zdGVsbGFyaXVtLXdlYi1lbmdpbmUvYXBwcy93ZWItZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS9xdWFyY3Mvd29ya3NwYWNlL1FVQVJDUy9RVUFSQ1Nfc3RlbGxhcml1bS13ZWItZW5naW5lL2FwcHMvd2ViLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL3F1YXJjcy93b3Jrc3BhY2UvUVVBUkNTL1FVQVJDU19zdGVsbGFyaXVtLXdlYi1lbmdpbmUvYXBwcy93ZWItZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgc3doIGZyb20gJ0AvYXNzZXRzL3N3X2hlbHBlcnMuanMnOwppbXBvcnQgeyBMTWFwLCBMVGlsZUxheWVyLCBMTWFya2VyLCBMQ2lyY2xlLCBMVG9vbHRpcCwgTENvbnRyb2xab29tIH0gZnJvbSAndnVlMi1sZWFmbGV0JzsKaW1wb3J0IEwgZnJvbSAnbGVhZmxldCc7CmltcG9ydCBNYXBDb25maWcgZnJvbSAnQC9jb25maWcvbWFwLWNvbmZpZy5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZTogJ3BpY2snLAogICAgICBwaWNrTG9jYXRpb246IHVuZGVmaW5lZCwKICAgICAgc2VsZWN0ZWRLbm93bkxvY2F0aW9uOiB1bmRlZmluZWQsCiAgICAgIG1hcENlbnRlcjogWzM5LjkwNDIsIDExNi40MDc0XSwKICAgICAgdXJsOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gJy90aWxlcy97en0ve3h9L3t5fS5wbmcnIDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC90aWxlcy97en0ve3h9L3t5fS5wbmcnLAogICAgICBmYWxsYmFja1VybDogJy90aWxlcy97en0ve3h9L3t5fS5wbmcnLAogICAgICBzZXJ2ZXJVcmw6ICdodHRwOi8vbG9jYWxob3N0OjgwODAvdGlsZXMve3p9L3t4fS97eX0ucG5nJywKICAgICAgb25saW5lVXJsOiAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICAvLyDkvb/nlKjphY3nva7mlofku7bkuK3nmoTnvKnmlL7nuqfliKvorr7nva4KICAgICAgbWluWm9vbTogTWFwQ29uZmlnLnpvb20ub2ZmbGluZS5taW4sCiAgICAgIG1heFpvb206IE1hcENvbmZpZy56b29tLm9mZmxpbmUubWF4LAogICAgICBkZWZhdWx0Wm9vbTogTWFwQ29uZmlnLnpvb20ub2ZmbGluZS5kZWZhdWx0LAogICAgICAvLyDlnLDnkIbnvJbnoIHliqDovb3nirbmgIEKICAgICAgZ2VvQ29kZUxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDlnLDlm77nsbvlnovlkoznvZHnu5znirbmgIEKICAgICAgdXNlT25saW5lTWFwOiB0cnVlLAogICAgICAvLyDkvb/nlKjlnKjnur/lnLDlm77vvIjnlKjmiLfpgInmi6nvvIkKICAgICAgaXNPbmxpbmVNYXBBdmFpbGFibGU6IGZhbHNlLAogICAgICAvLyDlnKjnur/lnLDlm77mmK/lkKblj6/nlKgKICAgICAgaXNOZXR3b3JrQ29ubmVjdGVkOiBmYWxzZSwKICAgICAgLy8g572R57uc5piv5ZCm6L+e6YCaCiAgICAgIGN1cnJlbnRNYXBUeXBlOiAnY2hlY2tpbmcnLAogICAgICAvLyDlvZPliY3lnLDlm77nsbvlnos6ICdvbmxpbmUnLCAnb2ZmbGluZScsICdjaGVja2luZycKICAgICAgbmV0d29ya0NoZWNrSW50ZXJ2YWw6IG51bGwsCiAgICAgIC8vIOe9kee7nOajgOa1i+WumuaXtuWZqAogICAgICAvLyDor7fmsYLmjqfliLYKICAgICAgY3VycmVudFJlcXVlc3RJZDogMCwKICAgICAgYWJvcnRDb250cm9sbGVyOiBudWxsCiAgICB9OwogIH0sCiAgcHJvcHM6IFsnc2hvd015TG9jYXRpb24nLCAna25vd25Mb2NhdGlvbnMnLCAnc3RhcnRMb2NhdGlvbicsICdyZWFsTG9jYXRpb24nXSwKICBjb21wdXRlZDogewogICAgZG9TaG93TXlMb2NhdGlvbjogZnVuY3Rpb24gZG9TaG93TXlMb2NhdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuc2hvd015TG9jYXRpb24gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogdGhpcy5zaG93TXlMb2NhdGlvbjsKICAgIH0sCiAgICBwaWNrTG9jYXRpb25Nb2RlOiBmdW5jdGlvbiBwaWNrTG9jYXRpb25Nb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSAncGljayc7CiAgICB9LAogICAga25vd25Mb2NhdGlvbk1vZGU6IGZ1bmN0aW9uIGtub3duTG9jYXRpb25Nb2RlKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSAna25vd24nOwogICAgfSwKICAgIGxvY2F0aW9uRm9yRGV0YWlsOiBmdW5jdGlvbiBsb2NhdGlvbkZvckRldGFpbCgpIHsKICAgICAgdmFyIGxvY2F0aW9uID0gbnVsbDsKCiAgICAgIGlmICh0aGlzLnBpY2tMb2NhdGlvbk1vZGUgJiYgdGhpcy5waWNrTG9jYXRpb24gPT09IHVuZGVmaW5lZCkgewogICAgICAgIGxvY2F0aW9uID0gdGhpcy5zdGFydExvY2F0aW9uOwogICAgICB9IGVsc2UgewogICAgICAgIGxvY2F0aW9uID0gdGhpcy5waWNrTG9jYXRpb25Nb2RlID8gdGhpcy5waWNrTG9jYXRpb24gOiB0aGlzLnNlbGVjdGVkS25vd25Mb2NhdGlvbjsKICAgICAgfSAvLyDlpoLmnpzmnInmnInmlYjkvY3nva7lsLHmuIXnkIblubbov5Tlm54KCgogICAgICBpZiAobG9jYXRpb24gJiYgdGhpcy5pc1ZhbGlkTG9jYXRpb24obG9jYXRpb24pKSB7CiAgICAgICAgdmFyIHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVMb2NhdGlvbihsb2NhdGlvbik7CgogICAgICAgIGlmIChzYW5pdGl6ZWQpIHsKICAgICAgICAgIHJldHVybiBzYW5pdGl6ZWQ7CiAgICAgICAgfQogICAgICB9IC8vIOi/lOWbnum7mOiupOS/oeaBr+eUqOS6juaYvuekuu+8jOS9huS4jeS8muW9seWTjeWcsOWbvumSiQoKCiAgICAgIHJldHVybiB7CiAgICAgICAgbGF0OiAzOS45MDQyLAogICAgICAgIGxuZzogMTE2LjQwNzQsCiAgICAgICAgYWNjdXJhY3k6IDEwMDAsCiAgICAgICAgc2hvcnRfbmFtZTogdGhpcy4kdCgnbG9jYXRpb25NZ3IuYmVpamluZycpLAogICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmNoaW5hJyksCiAgICAgICAgc3RyZWV0X2FkZHJlc3M6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmJlaWppbmdDaXR5JyksCiAgICAgICAgY2l0eTogdGhpcy4kdCgnbG9jYXRpb25NZ3IuYmVpamluZ0NpdHknKSwKICAgICAgICBzdGF0ZTogdGhpcy4kdCgnbG9jYXRpb25NZ3IuYmVpamluZ0NpdHknKSwKICAgICAgICBwb3N0Y29kZTogJycKICAgICAgfTsKICAgIH0sCiAgICAvLyDliqjmgIHnvKnmlL7nuqfliKvphY3nva4KICAgIGVmZmVjdGl2ZU1pblpvb206IGZ1bmN0aW9uIGVmZmVjdGl2ZU1pblpvb20oKSB7CiAgICAgIC8vIOWcqOe6v+WcsOWbvuS9v+eUqOabtOWuveadvueahOmZkOWItu+8jOemu+e6v+WcsOWbvuS9v+eUqOS4peagvOmZkOWItgogICAgICBpZiAodGhpcy5jdXJyZW50TWFwVHlwZSA9PT0gJ29ubGluZScpIHsKICAgICAgICByZXR1cm4gTWFwQ29uZmlnLnpvb20ub25saW5lLm1pbjsgLy8g5Zyo57q/5Zyw5Zu+77ya6YCa5bi45pivMOaIljEKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gTWFwQ29uZmlnLnpvb20ub2ZmbGluZS5taW47IC8vIOemu+e6v+WcsOWbvu+8muWfuuS6juWPr+eUqOeTpueJhwogICAgICB9CiAgICB9LAogICAgZWZmZWN0aXZlTWF4Wm9vbTogZnVuY3Rpb24gZWZmZWN0aXZlTWF4Wm9vbSgpIHsKICAgICAgLy8g5Zyo57q/5Zyw5Zu+5L2/55So5pu05a695p2+55qE6ZmQ5Yi277yM56a757q/5Zyw5Zu+5L2/55So5Lil5qC86ZmQ5Yi2CiAgICAgIGlmICh0aGlzLmN1cnJlbnRNYXBUeXBlID09PSAnb25saW5lJykgewogICAgICAgIHJldHVybiBNYXBDb25maWcuem9vbS5vbmxpbmUubWF4OyAvLyDlnKjnur/lnLDlm77vvJrpgJrluLjmmK8xOOaIljE5CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIE1hcENvbmZpZy56b29tLm9mZmxpbmUubWF4OyAvLyDnprvnur/lnLDlm77vvJrln7rkuo7lj6/nlKjnk6bniYcKICAgICAgfQogICAgfSwKICAgIHZhbGlkS25vd25Mb2NhdGlvbnM6IGZ1bmN0aW9uIHZhbGlkS25vd25Mb2NhdGlvbnMoKSB7CiAgICAgIGlmICghdGhpcy5rbm93bkxvY2F0aW9ucyB8fCAhQXJyYXkuaXNBcnJheSh0aGlzLmtub3duTG9jYXRpb25zKSB8fCB0aGlzLmtub3duTG9jYXRpb25zLmxlbmd0aCA9PT0gMCkgewogICAgICAgIC8vIOWmguaenOayoeacieS8oOWFpeS7u+S9leW3suefpeS9jee9ru+8jOS4jeaYvuekuum7mOiupOWcsOWbvumSiQogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgICAgdmFyIHZhbGlkTG9jYXRpb25zID0gdGhpcy5rbm93bkxvY2F0aW9ucy5maWx0ZXIodGhpcy5pc1ZhbGlkTG9jYXRpb24pOwogICAgICByZXR1cm4gdmFsaWRMb2NhdGlvbnM7CiAgICB9LAogICAgLy8g5o6n5Yi2cGlja0xvY2F0aW9u5Zyw5Zu+6ZKJ5piv5ZCm5pi+56S6CiAgICBzaG91bGRTaG93UGlja0xvY2F0aW9uOiBmdW5jdGlvbiBzaG91bGRTaG93UGlja0xvY2F0aW9uKCkgewogICAgICAvLyDlnKhwaWNrTG9jYXRpb25Nb2Rl5LiU5pyJ5pyJ5pWIcGlja0xvY2F0aW9u5pe25pi+56S677yI5YyF5ous6buY6K6k5L2N572u77yJCiAgICAgIHJldHVybiB0aGlzLnBpY2tMb2NhdGlvbk1vZGUgJiYgdGhpcy5waWNrTG9jYXRpb24gJiYgdGhpcy5pc1ZhbGlkTG9jYXRpb24odGhpcy5waWNrTG9jYXRpb24pOwogICAgfSwKICAgIGhhc1ZhbGlkU2VsZWN0aW9uOiBmdW5jdGlvbiBoYXNWYWxpZFNlbGVjdGlvbigpIHsKICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJ55yf5q2j55qE5L2N572u6YCJ5oupCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkS25vd25Mb2NhdGlvbikgewogICAgICAgIHJldHVybiB0cnVlOyAvLyDpgInmi6nkuoblt7Lnn6XkvY3nva4KICAgICAgfQoKICAgICAgaWYgKHRoaXMucGlja0xvY2F0aW9uICYmIHRoaXMuaXNWYWxpZExvY2F0aW9uKHRoaXMucGlja0xvY2F0aW9uKSkgewogICAgICAgIC8vIOWmguaenOWcsOWdgOS/oeaBr+aYvuekuiLmi5bmi73pgInmi6nkvY3nva4i5oiWIum7mOiupOS9jee9riLvvIzor7TmmI7nlKjmiLfov5jmsqHmnInmk43kvZwKICAgICAgICBpZiAodGhpcy5waWNrTG9jYXRpb24uc2hvcnRfbmFtZSA9PT0gdGhpcy4kdCgnbG9jYXRpb25NZ3IuZHJhZ1RvU2VsZWN0UGluJykgfHwgdGhpcy5waWNrTG9jYXRpb24uY291bnRyeSA9PT0gdGhpcy4kdCgnbG9jYXRpb25NZ3IuZGVmYXVsdExvY2F0aW9uJykpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc3RhcnRMb2NhdGlvbjogZnVuY3Rpb24gc3RhcnRMb2NhdGlvbihuZXdMb2NhdGlvbikgewogICAgICBpZiAodGhpcy5pc1ZhbGlkTG9jYXRpb24obmV3TG9jYXRpb24pKSB7CiAgICAgICAgdGhpcy5zZXRQaWNrTG9jYXRpb24obmV3TG9jYXRpb24pOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBzdGFydExvY2F0aW9uIHJlY2VpdmVkOicsIG5ld0xvY2F0aW9uKTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuJGJ1cy4kb24oJ3VwZGF0ZU1hcFBvc2l0aW9uJywgdGhpcy51cGRhdGVNYXBQb3NpdGlvbik7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgdGhhdCA9IHRoaXM7IC8vIOS/ruWkjUxlYWZsZXTlm77moIfpl67popgKCiAgICB0aGlzLmZpeExlYWZsZXRJY29ucygpOyAvLyDlj6rmnInlnKjkvKDlhaXmnInmlYhzdGFydExvY2F0aW9u5pe25omN6K6+572ucGlja0xvY2F0aW9uCgogICAgaWYgKHRoaXMuc3RhcnRMb2NhdGlvbiAmJiB0aGlzLmlzVmFsaWRMb2NhdGlvbih0aGlzLnN0YXJ0TG9jYXRpb24pKSB7CiAgICAgIHRoaXMuc2V0UGlja0xvY2F0aW9uKHRoaXMuc3RhcnRMb2NhdGlvbik7CiAgICB9IGVsc2UgewogICAgICAvLyDlpoLmnpzmsqHmnIlzdGFydExvY2F0aW9u77yM5Yib5bu65LiA5Liq6buY6K6k55qEcGlja0xvY2F0aW9u5Zyo5Zyw5Zu+5Lit5b+DCiAgICAgIHRoaXMucGlja0xvY2F0aW9uID0gewogICAgICAgIGxhdDogMzkuOTA0MiwKICAgICAgICBsbmc6IDExNi40MDc0LAogICAgICAgIGFjY3VyYWN5OiAwLAogICAgICAgIHNob3J0X25hbWU6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmRyYWdUb1NlbGVjdFBpbicpLAogICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmRlZmF1bHRMb2NhdGlvbicpLAogICAgICAgIHN0cmVldF9hZGRyZXNzOiB0aGlzLiR0KCdsb2NhdGlvbk1nci5kcmFnUGluVG9UYXJnZXQnKQogICAgICB9OwogICAgICB0aGlzLnNldFBpY2tMb2NhdGlvbk1vZGUoKTsKICAgIH0gLy8g5ZCv5Yqo572R57uc55uR5o6nCgoKICAgIHRoaXMuc3RhcnROZXR3b3JrTW9uaXRvcmluZygpOyAvLyDmo4DmtYvlubborr7nva7lnLDlm77nsbvlnosKCiAgICB0aGlzLmRldGVjdEFuZFNldE1hcFR5cGUoKTsKICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG1hcCA9IF90aGlzLiRyZWZzLm15TWFwLm1hcE9iamVjdDsKCiAgICAgIG1hcC5fb25SZXNpemUoKTsgLy8g6K6+572u57yp5pS+6ZmQ5Yi2CgoKICAgICAgX3RoaXMudXBkYXRlWm9vbUxpbWl0cyhtYXApOwogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgLy8g5riF55CG5a6a5pe25ZmoCiAgICBpZiAodGhpcy5uZXR3b3JrQ2hlY2tJbnRlcnZhbCkgewogICAgICBjbGVhckludGVydmFsKHRoaXMubmV0d29ya0NoZWNrSW50ZXJ2YWwpOwogICAgfSAvLyDmuIXnkIbor7fmsYLmjqfliLblmagKCgogICAgaWYgKHRoaXMuYWJvcnRDb250cm9sbGVyKSB7CiAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLmFib3J0KCk7CiAgICAgIGNvbnNvbGUubG9nKCfnu4Tku7bplIDmr4HvvIzlj5bmtojlnLDnkIbnvJbnoIHor7fmsYInKTsKICAgIH0gLy8g56e76Zmk572R57uc54q25oCB55uR5ZCs5ZmoCgoKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvbmxpbmUnLCB0aGlzLmRldGVjdEFuZFNldE1hcFR5cGUpOwogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCB0aGlzLmRldGVjdEFuZFNldE1hcFR5cGUpOwogIH0sCiAgbWV0aG9kczogewogICAgc2VsZWN0S25vd25Mb2NhdGlvbjogZnVuY3Rpb24gc2VsZWN0S25vd25Mb2NhdGlvbihsb2MpIHsKICAgICAgdGhpcy5zZWxlY3RlZEtub3duTG9jYXRpb24gPSBsb2M7CiAgICAgIHRoaXMuc2V0S25vd25Mb2NhdGlvbk1vZGUoKTsKICAgICAgdGhpcy5tYXBDZW50ZXIgPSBbbG9jLmxhdCwgbG9jLmxuZ107CiAgICB9LAogICAgdXNlTG9jYXRpb246IGZ1bmN0aW9uIHVzZUxvY2F0aW9uKCkgewogICAgICBjb25zb2xlLmxvZygn6Kem5Y+R5L2N572u5pu05pawdXNlTG9jYXRpb246JywgdGhpcy5sb2NhdGlvbkZvckRldGFpbC5sYXQsIHRoaXMubG9jYXRpb25Gb3JEZXRhaWwubG5nKTsKICAgICAgdGhpcy4kYnVzLiRlbWl0KCdsb2NhdGlvblNlbGVjdGVkJywgdGhpcy5sb2NhdGlvbkZvckRldGFpbCk7CiAgICAgIHZhciBsYXQgPSBwYXJzZUZsb2F0KHRoaXMubG9jYXRpb25Gb3JEZXRhaWwubGF0LnRvRml4ZWQoMykpOwogICAgICB2YXIgbG5nID0gcGFyc2VGbG9hdCh0aGlzLmxvY2F0aW9uRm9yRGV0YWlsLmxuZy50b0ZpeGVkKDMpKTsKICAgICAgdGhpcy4kYnVzLiRlbWl0KCdyZXNldExvY2F0aW9uJywgbGF0LCBsbmcsIGZhbHNlKTsKICAgIH0sCiAgICBzZXRQaWNrTG9jYXRpb25Nb2RlOiBmdW5jdGlvbiBzZXRQaWNrTG9jYXRpb25Nb2RlKCkgewogICAgICB0aGlzLm1vZGUgPSAncGljayc7CiAgICB9LAogICAgc2V0S25vd25Mb2NhdGlvbk1vZGU6IGZ1bmN0aW9uIHNldEtub3duTG9jYXRpb25Nb2RlKCkgewogICAgICB0aGlzLm1vZGUgPSAna25vd24nOwogICAgfSwKICAgIHNldFBpY2tMb2NhdGlvbjogZnVuY3Rpb24gc2V0UGlja0xvY2F0aW9uKGxvYykgewogICAgICAvLyDpqozor4HovpPlhaXmlbDmja4KICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb2NhdGlvbihsb2MpKSB7CiAgICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIGxvY2F0aW9uIGRhdGEgcmVjZWl2ZWQ6JywgbG9jKTsgLy8g5LiN5Yib5bu66buY6K6k5L2N572u77yM55u05o6l6L+U5ZueCgogICAgICAgIHJldHVybjsKICAgICAgfSAvLyDmuIXnkIbmlbDmja4KCgogICAgICB2YXIgc2FuaXRpemVkTG9jID0gdGhpcy5zYW5pdGl6ZUxvY2F0aW9uKGxvYyk7CgogICAgICBpZiAoc2FuaXRpemVkTG9jLmFjY3VyYWN5IDwgMTAwKSB7CiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMua25vd25Mb2NhdGlvbnMpLAogICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBsID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkTG9jYXRpb24obCkpIHsKICAgICAgICAgICAgICB2YXIgZCA9IHN3aC5nZXREaXN0YW5jZUZyb21MYXRMb25Jbk0obC5sYXQsIGwubG5nLCBzYW5pdGl6ZWRMb2MubGF0LCBzYW5pdGl6ZWRMb2MubG5nKTsKCiAgICAgICAgICAgICAgaWYgKGQgPCAxMDApIHsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0S25vd25Mb2NhdGlvbihsKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICB9IC8vIOiuvue9ruacieaViOeahOS9jee9rgoKCiAgICAgIHRoaXMubWFwQ2VudGVyID0gW3Nhbml0aXplZExvYy5sYXQsIHNhbml0aXplZExvYy5sbmddOwogICAgICB0aGlzLnBpY2tMb2NhdGlvbiA9IHNhbml0aXplZExvYzsKICAgICAgdGhpcy5zZXRQaWNrTG9jYXRpb25Nb2RlKCk7CiAgICB9LAogICAgLy8gQ2FsbGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIHRoZSBzbWFsbCBjcm9zcyBidXR0b24KICAgIGNlbnRlck9uUmVhbFBvc2l0aW9uOiBmdW5jdGlvbiBjZW50ZXJPblJlYWxQb3NpdGlvbigpIHsKICAgICAgdGhpcy5zZXRQaWNrTG9jYXRpb24odGhpcy5yZWFsTG9jYXRpb24pOwogICAgfSwKICAgIC8vIOmAmui/h+S/oeWPt+anveabtOaWsOWcsOWbvuaYvuekuuS9jee9rgogICAgdXBkYXRlTWFwUG9zaXRpb246IGZ1bmN0aW9uIHVwZGF0ZU1hcFBvc2l0aW9uKGxhdCwgbG5nKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9OwogICAgICBjb25zb2xlLmxvZygn5pS25Yiw5L2N572u5pu05paw5L+h5Y+3OicsIGxhdCwgbG5nLCBvcHRpb25zKTsgLy8g6aqM6K+B6L6T5YWl5Y+C5pWwCgogICAgICBpZiAodHlwZW9mIGxhdCAhPT0gJ251bWJlcicgfHwgdHlwZW9mIGxuZyAhPT0gJ251bWJlcicgfHwgaXNOYU4obGF0KSB8fCBpc05hTihsbmcpIHx8IGxhdCA8IC05MCB8fCBsYXQgPiA5MCB8fCBsbmcgPCAtMTgwIHx8IGxuZyA+IDE4MCkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aXoOaViOeahOS9jee9ruWdkOaghzonLCB7CiAgICAgICAgICBsYXQ6IGxhdCwKICAgICAgICAgIGxuZzogbG5nCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIOm7mOiupOmAiemhuQoKCiAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHsKICAgICAgICB1cGRhdGVNYXJrZXI6IHRydWUsCiAgICAgICAgLy8g5piv5ZCm5pu05paw5Zyw5Zu+6ZKJ5L2N572uCiAgICAgICAgZmV0Y2hBZGRyZXNzOiB0cnVlLAogICAgICAgIC8vIOaYr+WQpuiOt+WPluWcsOWdgOS/oeaBrwogICAgICAgIHpvb206IG51bGwsCiAgICAgICAgLy8g5Y+v6YCJ55qE57yp5pS+57qn5YirCiAgICAgICAgYW5pbWF0ZTogdHJ1ZSwKICAgICAgICAvLyDmmK/lkKbkvb/nlKjliqjnlLsKICAgICAgICBhY2N1cmFjeTogMCAvLyDkvY3nva7nsr7luqYKCiAgICAgIH07CiAgICAgIHZhciBjb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7CgogICAgICB0cnkgewogICAgICAgIC8vIOabtOaWsOWcsOWbvuS4reW/gwogICAgICAgIGlmIChjb25maWcuYW5pbWF0ZSAmJiB0aGlzLiRyZWZzLm15TWFwICYmIHRoaXMuJHJlZnMubXlNYXAubWFwT2JqZWN0KSB7CiAgICAgICAgICAvLyDkvb/nlKjliqjnlLvlubPmu5Hnp7vliqgKICAgICAgICAgIHZhciBtYXAgPSB0aGlzLiRyZWZzLm15TWFwLm1hcE9iamVjdDsKICAgICAgICAgIHZhciB0YXJnZXRab29tID0gY29uZmlnLnpvb20gfHwgbWFwLmdldFpvb20oKTsKICAgICAgICAgIG1hcC5mbHlUbyhbbGF0LCBsbmddLCB0YXJnZXRab29tLCB7CiAgICAgICAgICAgIGR1cmF0aW9uOiAxLjUsCiAgICAgICAgICAgIC8vIOWKqOeUu+aXtumVv++8iOenku+8iQogICAgICAgICAgICBlYXNlTGluZWFyaXR5OiAwLjEKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDnm7TmjqXorr7nva7lnLDlm77kuK3lv4MKICAgICAgICAgIHRoaXMubWFwQ2VudGVyID0gW2xhdCwgbG5nXTsgLy8g5aaC5p6c5oyH5a6a5LqG57yp5pS+57qn5Yir77yM6K6+572u57yp5pS+CgogICAgICAgICAgaWYgKGNvbmZpZy56b29tICYmIHRoaXMuJHJlZnMubXlNYXAgJiYgdGhpcy4kcmVmcy5teU1hcC5tYXBPYmplY3QpIHsKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzMi4kcmVmcy5teU1hcC5tYXBPYmplY3Quc2V0Wm9vbShjb25maWcuem9vbSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gLy8g5pu05paw5Zyw5Zu+6ZKJ5L2N572uCgoKICAgICAgICBpZiAoY29uZmlnLnVwZGF0ZU1hcmtlcikgewogICAgICAgICAgdmFyIG5ld0xvY2F0aW9uID0gewogICAgICAgICAgICBsYXQ6IGxhdCwKICAgICAgICAgICAgbG5nOiBsbmcsCiAgICAgICAgICAgIGFjY3VyYWN5OiBjb25maWcuYWNjdXJhY3ksCiAgICAgICAgICAgIHNob3J0X25hbWU6IGNvbmZpZy5mZXRjaEFkZHJlc3MgPyB0aGlzLiR0KCdsb2NhdGlvbk1nci5mZXRjaGluZ0xvY2F0aW9uSW5mbycpIDogdGhpcy4kdCgnbG9jYXRpb25NZ3IubmV3TG9jYXRpb24nKSwKICAgICAgICAgICAgY291bnRyeTogY29uZmlnLmZldGNoQWRkcmVzcyA/IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnBsZWFzZVdhaXQnKSA6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnVua25vd24nKSwKICAgICAgICAgICAgc3RyZWV0X2FkZHJlc3M6ICIiLmNvbmNhdCh0aGlzLiR0KCdsb2NhdGlvbk1nci5jb29yZGluYXRlcycpLCAiOiAiKS5jb25jYXQobGF0LnRvRml4ZWQoNiksICIsICIpLmNvbmNhdChsbmcudG9GaXhlZCg2KSkKICAgICAgICAgIH07IC8vIOagueaNruW9k+WJjeaooeW8j+abtOaWsOS9jee9rgoKICAgICAgICAgIGlmICh0aGlzLnBpY2tMb2NhdGlvbk1vZGUpIHsKICAgICAgICAgICAgdGhpcy5waWNrTG9jYXRpb24gPSBuZXdMb2NhdGlvbjsKICAgICAgICAgICAgdGhpcy5zZXRQaWNrTG9jYXRpb25Nb2RlKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDliJvlu7rmlrDnmoTmi77lj5bkvY3nva4KICAgICAgICAgICAgdGhpcy5waWNrTG9jYXRpb24gPSBuZXdMb2NhdGlvbjsKICAgICAgICAgICAgdGhpcy5zZXRQaWNrTG9jYXRpb25Nb2RlKCk7CiAgICAgICAgICB9IC8vIOiOt+WPluWcsOWdgOS/oeaBrwoKCiAgICAgICAgICBpZiAoY29uZmlnLmZldGNoQWRkcmVzcykgewogICAgICAgICAgICB0aGlzLnJlcXVlc3RMb2NhdGlvbkluZm8obGF0LCBsbmcpOwogICAgICAgICAgfQogICAgICAgIH0gLy8g6Kem5Y+R5L2N572u5pu05paw5LqL5Lu2CgoKICAgICAgICB0aGlzLiRlbWl0KCdtYXBQb3NpdGlvblVwZGF0ZWQnLCB7CiAgICAgICAgICBsYXQ6IGxhdCwKICAgICAgICAgIGxuZzogbG5nLAogICAgICAgICAgb3B0aW9uczogY29uZmlnCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coJ+WcsOWbvuS9jee9ruabtOaWsOaIkOWKnzonLCB7CiAgICAgICAgICBsYXQ6IGxhdCwKICAgICAgICAgIGxuZzogbG5nLAogICAgICAgICAgY29uZmlnOiBjb25maWcKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCflnLDlm77kvY3nva7mm7TmlrDlpLHotKU6JywgZXJyb3IpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIOi+heWKqeaWueazle+8muivt+axguS9jee9ruS/oeaBrwogICAgcmVxdWVzdExvY2F0aW9uSW5mbzogZnVuY3Rpb24gcmVxdWVzdExvY2F0aW9uSW5mbyhsYXQsIGxuZykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIC8vIOeUn+aIkOaWsOeahOivt+axgklECiAgICAgIHZhciByZXF1ZXN0SWQgPSArK3RoaXMuY3VycmVudFJlcXVlc3RJZDsgLy8g5bu26L+f6I635Y+W5Zyw55CG5L+h5oGv77yM6YG/5YWN6aKR57mB6K+35rGCCgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyDmo4Dmn6XmmK/lkKbmmK/mnIDmlrDnmoTor7fmsYIKICAgICAgICBpZiAocmVxdWVzdElkICE9PSBfdGhpczMuY3VycmVudFJlcXVlc3RJZCkgewogICAgICAgICAgY29uc29sZS5sb2coJ+S9jee9ruS/oeaBr+ivt+axguW3sui/h+acn++8jOi3s+i/h+WcsOeQhue8lueggScpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8g6I635Y+W5Zyw55CG5L+h5oGv77yI5Zyo57q/5oiW56a757q/77yJCgoKICAgICAgICBfdGhpczMuZ2V0Q2l0eUluZm8oewogICAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgICBsbmc6IGxuZwogICAgICAgIH0sIHJlcXVlc3RJZCkudGhlbihmdW5jdGlvbiAoY2l0eUluZm8pIHsKICAgICAgICAgIHZhciBfdGhpczMkcGlja0xvY2F0aW9uOwoKICAgICAgICAgIC8vIOWGjeasoeajgOafpeivt+axguaYr+WQpuS7jeeEtuacieaViAogICAgICAgICAgaWYgKHJlcXVlc3RJZCAhPT0gX3RoaXMzLmN1cnJlbnRSZXF1ZXN0SWQpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+WcsOeQhue8lueggeWujOaIkO+8jOS9huivt+axguW3sui/h+acnycpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHVwZGF0ZWRQb3MgPSBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgICAgIGxuZzogbG5nLAogICAgICAgICAgICBhY2N1cmFjeTogKChfdGhpczMkcGlja0xvY2F0aW9uID0gX3RoaXMzLnBpY2tMb2NhdGlvbikgPT09IG51bGwgfHwgX3RoaXMzJHBpY2tMb2NhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMzJHBpY2tMb2NhdGlvbi5hY2N1cmFjeSkgfHwgMAogICAgICAgICAgfSwgY2l0eUluZm8pOyAvLyDmm7TmlrDkvY3nva7kv6Hmga8KCgogICAgICAgICAgaWYgKF90aGlzMy5waWNrTG9jYXRpb25Nb2RlICYmIF90aGlzMy5waWNrTG9jYXRpb24pIHsKICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihfdGhpczMucGlja0xvY2F0aW9uLCB1cGRhdGVkUG9zKTsKCiAgICAgICAgICAgIF90aGlzMy4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zb2xlLmxvZygn5L2N572u5L+h5oGv5bey5pu05pawOicsIHVwZGF0ZWRQb3MpOyAvLyDop6blj5HlnLDlnYDkv6Hmga/mm7TmlrDkuovku7YKCiAgICAgICAgICBfdGhpczMuJGVtaXQoJ2FkZHJlc3NJbmZvVXBkYXRlZCcsIHVwZGF0ZWRQb3MpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgdmFyIF90aGlzMyRwaWNrTG9jYXRpb24yOwoKICAgICAgICAgIC8vIOajgOafpeaYr+WQpuaYr+ivt+axguWPlua2iOmUmeivrwogICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykgewogICAgICAgICAgICBjb25zb2xlLmxvZygn5Zyw55CG57yW56CB6K+35rGC6KKr5Y+W5raIJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy8g5YaN5qyh5qOA5p+l6K+35rGC5piv5ZCm5LuN54S25pyJ5pWICgoKICAgICAgICAgIGlmIChyZXF1ZXN0SWQgIT09IF90aGlzMy5jdXJyZW50UmVxdWVzdElkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCflnLDnkIbnvJbnoIHlpLHotKXvvIzkvYbor7fmsYLlt7Lov4fmnJ8nKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluS9jee9ruS/oeaBr+Wksei0pTonLCBlcnJvcik7IC8vIOmUmeivr+WkhOeQhgoKICAgICAgICAgIHZhciBlcnJvckxvY2F0aW9uSW5mbyA9IHsKICAgICAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgICAgIGxuZzogbG5nLAogICAgICAgICAgICBhY2N1cmFjeTogKChfdGhpczMkcGlja0xvY2F0aW9uMiA9IF90aGlzMy5waWNrTG9jYXRpb24pID09PSBudWxsIHx8IF90aGlzMyRwaWNrTG9jYXRpb24yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczMkcGlja0xvY2F0aW9uMi5hY2N1cmFjeSkgfHwgMCwKICAgICAgICAgICAgc2hvcnRfbmFtZTogX3RoaXMzLiR0KCdsb2NhdGlvbk1nci5mZXRjaExvY2F0aW9uRmFpbGVkJyksCiAgICAgICAgICAgIGNvdW50cnk6IF90aGlzMy4kdCgnbG9jYXRpb25NZ3IudW5rbm93blJlZ2lvbicpLAogICAgICAgICAgICBzdHJlZXRfYWRkcmVzczogIiIuY29uY2F0KF90aGlzMy4kdCgnbG9jYXRpb25NZ3IuY29vcmRpbmF0ZXMnKSwgIjogIikuY29uY2F0KGxhdC50b0ZpeGVkKDYpLCAiLCAiKS5jb25jYXQobG5nLnRvRml4ZWQoNikpCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChfdGhpczMucGlja0xvY2F0aW9uTW9kZSAmJiBfdGhpczMucGlja0xvY2F0aW9uKSB7CiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oX3RoaXMzLnBpY2tMb2NhdGlvbiwgZXJyb3JMb2NhdGlvbkluZm8pOwoKICAgICAgICAgICAgX3RoaXMzLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgICAgfSAvLyDop6blj5HplJnor6/kuovku7YKCgogICAgICAgICAgX3RoaXMzLiRlbWl0KCdhZGRyZXNzSW5mb0Vycm9yJywgewogICAgICAgICAgICBsYXQ6IGxhdCwKICAgICAgICAgICAgbG5nOiBsbmcsCiAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSwgMTAwKTsgLy8gMTAwbXPlu7bov58KICAgIH0sCiAgICBjaGVja1RpbGVBdmFpbGFiaWxpdHk6IGZ1bmN0aW9uIGNoZWNrVGlsZUF2YWlsYWJpbGl0eSgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOyAvLyDlnKjnlJ/kuqfnjq/looPkuIvkvJjlhYjkvb/nlKjpnZnmgIHnk6bniYcKCiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgdGhhdC50ZXN0U3RhdGljVGlsZXMoKS50aGVuKGZ1bmN0aW9uIChpc0F2YWlsYWJsZSkgewogICAgICAgICAgaWYgKGlzQXZhaWxhYmxlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkvb/nlKjpnZnmgIHnk6bniYfmlofku7YnKTsKICAgICAgICAgICAgdGhhdC51cmwgPSB0aGF0LmZhbGxiYWNrVXJsOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+mdmeaAgeeTpueJh+S4jeWPr+eUqO+8jOWwneivlXRpbGXmnI3liqHlmagnKTsKICAgICAgICAgICAgdGhhdC50ZXN0VGlsZVNlcnZlcigpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOW8gOWPkeeOr+Wig+S4i+S8mOWFiOWwneivlXRpbGXmnI3liqHlmagKICAgICAgICB0aGF0LnRlc3RUaWxlU2VydmVyKCk7CiAgICAgIH0KICAgIH0sCiAgICB0ZXN0U3RhdGljVGlsZXM6IGZ1bmN0aW9uIHRlc3RTdGF0aWNUaWxlcygpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAvLyDmtYvor5XlpJrkuKrnvKnmlL7nuqfliKvnmoTnk6bniYfmmK/lkKblrZjlnKgKICAgICAgICB2YXIgdGVzdFVybHMgPSBbJy90aWxlcy8wLzAvMC5wbmcnLCAnL3RpbGVzLzEvMC8wLnBuZycsICcvdGlsZXMvMi8xLzEucG5nJ107CiAgICAgICAgdmFyIHRlc3RDb3VudCA9IDA7CiAgICAgICAgdmFyIHN1Y2Nlc3NDb3VudCA9IDA7CiAgICAgICAgdGVzdFVybHMuZm9yRWFjaChmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgbWV0aG9kOiAnSEVBRCcKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHRlc3RDb3VudCsrOwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgc3VjY2Vzc0NvdW50Kys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0ZXN0Q291bnQgPT09IHRlc3RVcmxzLmxlbmd0aCkgewogICAgICAgICAgICAgIC8vIOWmguaenOiHs+WwkeS4gOWNiueahOa1i+ivleeTpueJh+WPr+eUqO+8jOiupOS4uumdmeaAgeeTpueJh+WPr+eUqAogICAgICAgICAgICAgIHJlc29sdmUoc3VjY2Vzc0NvdW50ID49IHRlc3RVcmxzLmxlbmd0aCAvIDIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRlc3RDb3VudCsrOwoKICAgICAgICAgICAgaWYgKHRlc3RDb3VudCA9PT0gdGVzdFVybHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShzdWNjZXNzQ291bnQgPj0gdGVzdFVybHMubGVuZ3RoIC8gMik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOyAvLyDotoXml7blpITnkIYKCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAodGVzdENvdW50IDwgdGVzdFVybHMubGVuZ3RoKSB7CiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0sIDIwMDApOwogICAgICB9KTsKICAgIH0sCiAgICB0ZXN0VGlsZVNlcnZlcjogZnVuY3Rpb24gdGVzdFRpbGVTZXJ2ZXIoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsgLy8g5rWL6K+VdGlsZeacjeWKoeWZqOaYr+WQpuWPr+eUqAoKICAgICAgdmFyIHRlc3RVcmwgPSB0aGlzLnNlcnZlclVybC5yZXBsYWNlKCd7en0nLCAnMCcpLnJlcGxhY2UoJ3t4fScsICcwJykucmVwbGFjZSgne3l9JywgJzAnKTsKICAgICAgZmV0Y2godGVzdFVybCwgewogICAgICAgIG1ldGhvZDogJ0hFQUQnLAogICAgICAgIHRpbWVvdXQ6IDMwMDAKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCd0aWxl5pyN5Yqh5Zmo5Y+v55SoJyk7CiAgICAgICAgICB0aGF0LnVybCA9IHRoYXQuc2VydmVyVXJsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RpbGXmnI3liqHlmajlk43lupTplJnor68nKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCd0aWxl5pyN5Yqh5Zmo5LiN5Y+v55So77yM5L2/55So6Z2Z5oCB55Om54mHOicsIGVycm9yKTsKICAgICAgICB0aGF0LnVybCA9IHRoYXQuZmFsbGJhY2tVcmw7IC8vIOWmguaenOmdmeaAgeeTpueJh+S5n+S4jeWPr+eUqO+8jOacgOWQjuWwneivleWcqOe6v+eTpueJhwoKICAgICAgICB0aGF0LnRlc3RTdGF0aWNUaWxlcygpLnRoZW4oZnVuY3Rpb24gKGlzQXZhaWxhYmxlKSB7CiAgICAgICAgICBpZiAoIWlzQXZhaWxhYmxlICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfliIfmjaLliLDlnKjnur/nk6bniYfmnI3liqEnKTsKICAgICAgICAgICAgdGhhdC51cmwgPSB0aGF0Lm9ubGluZVVybDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlWm9vbUxpbWl0czogZnVuY3Rpb24gdXBkYXRlWm9vbUxpbWl0cyhtYXApIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOyAvLyDliqjmgIHorr7nva7nvKnmlL7pmZDliLYKCiAgICAgIG1hcC5zZXRNaW5ab29tKHRoaXMuZWZmZWN0aXZlTWluWm9vbSk7CiAgICAgIG1hcC5zZXRNYXhab29tKHRoaXMuZWZmZWN0aXZlTWF4Wm9vbSk7CiAgICAgIGNvbnNvbGUubG9nKCJcdTU3MzBcdTU2RkVcdTdGMjlcdTY1M0VcdTk2NTBcdTUyMzZcdTY2RjRcdTY1QjA6ICIuY29uY2F0KHRoaXMuZWZmZWN0aXZlTWluWm9vbSwgIiAtICIpLmNvbmNhdCh0aGlzLmVmZmVjdGl2ZU1heFpvb20sICIgKCIpLmNvbmNhdCh0aGlzLmN1cnJlbnRNYXBUeXBlLCAiXHU2QTIxXHU1RjBGKSIpKTsgLy8g5Y+q5Zyo56a757q/5qih5byP5LiL5qOA5rWL5Y+v55So55Om54mH57qn5YirCgogICAgICBpZiAodGhpcy5jdXJyZW50TWFwVHlwZSA9PT0gJ29mZmxpbmUnICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHsKICAgICAgICB0aGlzLmRldGVjdEF2YWlsYWJsZVRpbGVMZXZlbHMoKS50aGVuKGZ1bmN0aW9uIChsZXZlbHMpIHsKICAgICAgICAgIGlmIChsZXZlbHMubWluICE9PSBudWxsICYmIGxldmVscy5tYXggIT09IG51bGwpIHsKICAgICAgICAgICAgbWFwLnNldE1pblpvb20obGV2ZWxzLm1pbik7CiAgICAgICAgICAgIG1hcC5zZXRNYXhab29tKGxldmVscy5tYXgpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiXHU3OUJCXHU3RUJGXHU3NEU2XHU3MjQ3XHU3RUE3XHU1MjJCXHU2OEMwXHU2RDRCOiAiLmNvbmNhdChsZXZlbHMubWluLCAiIC0gIikuY29uY2F0KGxldmVscy5tYXgpKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGRldGVjdEF2YWlsYWJsZVRpbGVMZXZlbHM6IGZ1bmN0aW9uIGRldGVjdEF2YWlsYWJsZVRpbGVMZXZlbHMoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgdmFyIHRlc3RMZXZlbHMgPSBNYXBDb25maWcuZGV0ZWN0aW9uLnRlc3RMZXZlbHM7CiAgICAgICAgdmFyIGF2YWlsYWJsZUxldmVscyA9IFtdOwogICAgICAgIHZhciB0ZXN0Q291bnQgPSAwOwogICAgICAgIHRlc3RMZXZlbHMuZm9yRWFjaChmdW5jdGlvbiAobGV2ZWwpIHsKICAgICAgICAgIHZhciB0ZXN0VXJsID0gIi90aWxlcy8iLmNvbmNhdChsZXZlbCwgIi8wLzAucG5nIik7CiAgICAgICAgICBmZXRjaCh0ZXN0VXJsLCB7CiAgICAgICAgICAgIG1ldGhvZDogJ0hFQUQnCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICB0ZXN0Q291bnQrKzsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgIGF2YWlsYWJsZUxldmVscy5wdXNoKGxldmVsKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRlc3RDb3VudCA9PT0gdGVzdExldmVscy5sZW5ndGgpIHsKICAgICAgICAgICAgICBhdmFpbGFibGVMZXZlbHMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgICAgbWluOiBhdmFpbGFibGVMZXZlbHMubGVuZ3RoID4gMCA/IGF2YWlsYWJsZUxldmVsc1swXSA6IG51bGwsCiAgICAgICAgICAgICAgICBtYXg6IGF2YWlsYWJsZUxldmVscy5sZW5ndGggPiAwID8gYXZhaWxhYmxlTGV2ZWxzW2F2YWlsYWJsZUxldmVscy5sZW5ndGggLSAxXSA6IG51bGwsCiAgICAgICAgICAgICAgICBhdmFpbGFibGU6IGF2YWlsYWJsZUxldmVscwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRlc3RDb3VudCsrOwoKICAgICAgICAgICAgaWYgKHRlc3RDb3VudCA9PT0gdGVzdExldmVscy5sZW5ndGgpIHsKICAgICAgICAgICAgICBhdmFpbGFibGVMZXZlbHMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgICAgbWluOiBhdmFpbGFibGVMZXZlbHMubGVuZ3RoID4gMCA/IGF2YWlsYWJsZUxldmVsc1swXSA6IG51bGwsCiAgICAgICAgICAgICAgICBtYXg6IGF2YWlsYWJsZUxldmVscy5sZW5ndGggPiAwID8gYXZhaWxhYmxlTGV2ZWxzW2F2YWlsYWJsZUxldmVscy5sZW5ndGggLSAxXSA6IG51bGwsCiAgICAgICAgICAgICAgICBhdmFpbGFibGU6IGF2YWlsYWJsZUxldmVscwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsgLy8g5L2/55So6YWN572u55qE6LaF5pe25pe26Ze0CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRlc3RDb3VudCA8IHRlc3RMZXZlbHMubGVuZ3RoKSB7CiAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgIG1pbjogTWFwQ29uZmlnLnpvb20ub2ZmbGluZS5taW4sCiAgICAgICAgICAgICAgbWF4OiBNYXBDb25maWcuem9vbS5vZmZsaW5lLm1heCwKICAgICAgICAgICAgICBhdmFpbGFibGU6IFtdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIE1hcENvbmZpZy5kZXRlY3Rpb24udGltZW91dCk7CiAgICAgIH0pOwogICAgfSwKICAgIGlzVmFsaWRMb2NhdGlvbjogZnVuY3Rpb24gaXNWYWxpZExvY2F0aW9uKGxvY2F0aW9uKSB7CiAgICAgIGlmICghbG9jYXRpb24pIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCfkvY3nva7pqozor4E6IOS9jee9ruWvueixoeS4uuepuicpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSAvLyDmo4Dmn6Xlv4XpnIDnmoTlsZ7mgKfmmK/lkKblrZjlnKgKCgogICAgICBpZiAodHlwZW9mIGxvY2F0aW9uLmxhdCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGxvY2F0aW9uLmxuZyA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCfkvY3nva7pqozor4E6IOe8uuWwkWxhdOaIlmxuZ+WxnuaApycsIGxvY2F0aW9uKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8g5qOA5p+l57uP57qs5bqm5piv5ZCm5Li65pyJ5pWI5pWw5a2XCgoKICAgICAgdmFyIGxhdCA9IHBhcnNlRmxvYXQobG9jYXRpb24ubGF0KTsKICAgICAgdmFyIGxuZyA9IHBhcnNlRmxvYXQobG9jYXRpb24ubG5nKTsKCiAgICAgIGlmIChpc05hTihsYXQpIHx8IGlzTmFOKGxuZykpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCfkvY3nva7pqozor4E6IOWdkOagh+S4jeaYr+acieaViOaVsOWtlycsIHsKICAgICAgICAgIGxhdDogbG9jYXRpb24ubGF0LAogICAgICAgICAgbG5nOiBsb2NhdGlvbi5sbmcsCiAgICAgICAgICBwYXJzZWRMYXQ6IGxhdCwKICAgICAgICAgIHBhcnNlZExuZzogbG5nCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIOajgOafpee7j+e6rOW6puiMg+WbtAoKCiAgICAgIGlmIChsYXQgPCAtOTAgfHwgbGF0ID4gOTAgfHwgbG5nIDwgLTE4MCB8fCBsbmcgPiAxODApIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCfkvY3nva7pqozor4E6IOWdkOagh+i2heWHuuacieaViOiMg+WbtCcsIHsKICAgICAgICAgIGxhdDogbGF0LAogICAgICAgICAgbG5nOiBsbmcKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8g5qOA5p+l5piv5ZCm5piv5p6B5YC877yI5Y+v6IO96KGo56S66ZSZ6K+v5pWw5o2u77yJCgoKICAgICAgaWYgKGxhdCA9PT0gMCAmJiBsbmcgPT09IDApIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCfkvY3nva7pqozor4E6IOWdkOagh+S4uigwLDAp77yM5Y+v6IO95piv6ZSZ6K+v5pWw5o2uJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBzYW5pdGl6ZUxvY2F0aW9uOiBmdW5jdGlvbiBzYW5pdGl6ZUxvY2F0aW9uKGxvY2F0aW9uKSB7CiAgICAgIGlmICghbG9jYXRpb24pIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCfkvY3nva7muIXnkIY6IOi+k+WFpeS9jee9ruS4uuepuicpOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9IC8vIOehruS/neacieWfuuacrOeahOWdkOaghwoKCiAgICAgIHZhciBsYXQgPSBwYXJzZUZsb2F0KGxvY2F0aW9uLmxhdCk7CiAgICAgIHZhciBsbmcgPSBwYXJzZUZsb2F0KGxvY2F0aW9uLmxuZyk7CgogICAgICBpZiAoaXNOYU4obGF0KSB8fCBpc05hTihsbmcpKSB7CiAgICAgICAgY29uc29sZS5kZWJ1Zygn5L2N572u5riF55CGOiDml6DmlYjnmoTlnZDmoIfmlbDmja4nLCBsb2NhdGlvbik7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHZhciBzYW5pdGl6ZWQgPSB7CiAgICAgICAgbGF0OiBNYXRoLm1heCgtOTAsIE1hdGgubWluKDkwLCBsYXQpKSwKICAgICAgICAvLyDnoa7kv53nuqzluqblnKjmnInmlYjojIPlm7TlhoUKICAgICAgICBsbmc6IE1hdGgubWF4KC0xODAsIE1hdGgubWluKDE4MCwgbG5nKSksCiAgICAgICAgLy8g56Gu5L+d57uP5bqm5Zyo5pyJ5pWI6IyD5Zu05YaFCiAgICAgICAgYWNjdXJhY3k6IHBhcnNlRmxvYXQobG9jYXRpb24uYWNjdXJhY3kpIHx8IDEwMCwKICAgICAgICBzaG9ydF9uYW1lOiBsb2NhdGlvbi5zaG9ydF9uYW1lIHx8IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25Mb2NhdGlvbicpLAogICAgICAgIGNvdW50cnk6IGxvY2F0aW9uLmNvdW50cnkgfHwgdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93bkNvdW50cnknKSwKICAgICAgICBzdHJlZXRfYWRkcmVzczogbG9jYXRpb24uc3RyZWV0X2FkZHJlc3MgfHwgJycsCiAgICAgICAgY2l0eTogbG9jYXRpb24uY2l0eSB8fCB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duQ2l0eScpLAogICAgICAgIHN0YXRlOiBsb2NhdGlvbi5zdGF0ZSB8fCAnJywKICAgICAgICBwb3N0Y29kZTogbG9jYXRpb24ucG9zdGNvZGUgfHwgJycKICAgICAgfTsgLy8g5YaN5qyh6aqM6K+B5riF55CG5ZCO55qE5L2N572uCgogICAgICBpZiAoIXRoaXMuaXNWYWxpZExvY2F0aW9uKHNhbml0aXplZCkpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCfkvY3nva7muIXnkIY6IOa4heeQhuWQjuS7jeeEtuaXoOaViCcsIHNhbml0aXplZCk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBzYW5pdGl6ZWQ7CiAgICB9LAogICAgZml4TGVhZmxldEljb25zOiBmdW5jdGlvbiBmaXhMZWFmbGV0SWNvbnMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgLy8g5L+u5aSNTGVhZmxldOWbvuagh+mXrumimAogICAgICBMLkljb24uRGVmYXVsdC5pbWFnZVBhdGggPSAnaHR0cHM6Ly91bnBrZy5jb20vbGVhZmxldEAxLjcuMS9kaXN0L2ltYWdlcy8nOyAvLyDnoa7kv53op6blsY/mi5bmi73mlK/mjIEKCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXM0LiRyZWZzLm15TWFwICYmIF90aGlzNC4kcmVmcy5teU1hcC5tYXBPYmplY3QpIHsKICAgICAgICAgIHZhciBtYXAgPSBfdGhpczQuJHJlZnMubXlNYXAubWFwT2JqZWN0OyAvLyDlkK/nlKjop6blsY/mi5bmi70KCiAgICAgICAgICBtYXAub3B0aW9ucy50b3VjaFpvb20gPSB0cnVlOwogICAgICAgICAgbWFwLm9wdGlvbnMudG91Y2hQYW4gPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0Q2l0eUluZm86IGZ1bmN0aW9uIGdldENpdHlJbmZvKHBvc2l0aW9uLCByZXF1ZXN0SWQpIHsKICAgICAgLy8g6K6+572u5Yqg6L2954q25oCBCiAgICAgIHRoaXMuZ2VvQ29kZUxvYWRpbmcgPSB0cnVlOyAvLyDliJvlu7pBYm9ydENvbnRyb2xsZXIKCiAgICAgIHZhciBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7CiAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyID0gYWJvcnRDb250cm9sbGVyOyAvLyDnm7TmjqXln7rkuo7lt7Lnoa7lrprnmoTlnLDlm77nsbvlnovpgInmi6nlnLDnkIbnvJbnoIHmlrnlvI/vvIjkuI3ph43lpI3liKTmlq3nvZHnu5znirbmgIHvvIkKCiAgICAgIGlmICh0aGlzLmN1cnJlbnRNYXBUeXBlID09PSAnb25saW5lJykgewogICAgICAgIHJldHVybiB0aGlzLmdldE9ubGluZUdlb2NvZGluZ0luZm8ocG9zaXRpb24sIGFib3J0Q29udHJvbGxlcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T2ZmbGluZUdlb2NvZGluZ0luZm8ocG9zaXRpb24pOwogICAgICB9CiAgICB9LAogICAgLy8g5Zyo57q/5Zyw55CG57yW56CBCiAgICBnZXRPbmxpbmVHZW9jb2RpbmdJbmZvOiBmdW5jdGlvbiBnZXRPbmxpbmVHZW9jb2RpbmdJbmZvKHBvc2l0aW9uLCBhYm9ydENvbnRyb2xsZXIpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZygn5L2/55So5Zyo57q/5Zyw55CG57yW56CB5pyN5YqhJyk7IC8vIOWwneivleWkmuenjeWcsOeQhue8lueggeacjeWKoeWSjOetlueVpQoKICAgICAgdmFyIHRyeUdlb2NvZGluZyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICB2YXIgc2VydmljZXMsIF9pLCBfc2VydmljZXMsIHNlcnZpY2UsIGRhdGEsIHJlc3BvbnNlLCBfcmVzcG9uc2UsIGNpdHlJbmZvLCByZXN1bHQsIGNvbXBvbmVudHMsIGFkZHJlc3M7CgogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAvLyDnrZbnlaUxOiDlsJ3or5Xkvb/nlKhKU09OUOaWueW8j+e7lei/h0NPUlPvvIjlpoLmnpzmnI3liqHmlK/mjIHvvIkKICAgICAgICAgICAgICAgICAgLy8g562W55WlMjog5L2/55So5YWs5byA55qE5Luj55CG5pyN5YqhCiAgICAgICAgICAgICAgICAgIC8vIOetlueVpTM6IOmZjee6p+WIsOemu+e6v+aooeW8jwogICAgICAgICAgICAgICAgICBzZXJ2aWNlcyA9IFt7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0JpZ0RhdGFDbG91ZC1BUEknLAogICAgICAgICAgICAgICAgICAgIHVybDogImh0dHBzOi8vYXBpLmJpZ2RhdGFjbG91ZC5uZXQvZGF0YS9yZXZlcnNlLWdlb2NvZGUtY2xpZW50P2xhdGl0dWRlPSIuY29uY2F0KHBvc2l0aW9uLmxhdCwgIiZsb25naXR1ZGU9IikuY29uY2F0KHBvc2l0aW9uLmxuZywgIiZsb2NhbGl0eUxhbmd1YWdlPXpoLUNOIiksCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnZmV0Y2gtY29ycycKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdPcGVuQ2FnZS1EZW1vJywKICAgICAgICAgICAgICAgICAgICB1cmw6ICJodHRwczovL2FwaS5vcGVuY2FnZWRhdGEuY29tL2dlb2NvZGUvdjEvanNvbj9xPSIuY29uY2F0KHBvc2l0aW9uLmxhdCwgIisiKS5jb25jYXQocG9zaXRpb24ubG5nLCAiJmtleT1kZW1vJmxhbmd1YWdlPXpoLUNOJnByZXR0eT0xJm5vX2Fubm90YXRpb25zPTEiKSwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdmZXRjaC1jb3JzJwogICAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgICAgX2kgPSAwLCBfc2VydmljZXMgPSBzZXJ2aWNlczsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGlmICghKF9pIDwgX3NlcnZpY2VzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHNlcnZpY2UgPSBfc2VydmljZXNbX2ldOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlx1NUMxRFx1OEJENVx1NEY3Rlx1NzUyOCIuY29uY2F0KHNlcnZpY2UubmFtZSwgIlx1ODNCN1x1NTNENlx1NTczMFx1NTc0MFx1NEZFMVx1NjA2Ri4uLiIpKTsKICAgICAgICAgICAgICAgICAgZGF0YSA9IHZvaWQgMDsKCiAgICAgICAgICAgICAgICAgIGlmICghKHNlcnZpY2UubWV0aG9kID09PSAnanNvbnAnKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LmZldGNoV2l0aEpTT05QKHNlcnZpY2UudXJsLCA4MDAwKTsKCiAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMyOwogICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICBpZiAoIShzZXJ2aWNlLm1ldGhvZCA9PT0gJ2ZldGNoLWNvcnMnKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goc2VydmljZS51cmwsIHsKICAgICAgICAgICAgICAgICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlci5zaWduYWwsCiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2NvcnMnLAogICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIiIuY29uY2F0KHNlcnZpY2UubmFtZSwgIiBIVFRQICIpLmNvbmNhdChyZXNwb25zZS5zdGF0dXMpKTsKCiAgICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI2OwogICAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goc2VydmljZS51cmwsIHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBzZXJ2aWNlLmhlYWRlcnMgfHwge30sCiAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLAogICAgICAgICAgICAgICAgICAgIG1vZGU6ICdjb3JzJywKICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ29taXQnCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICAgIF9yZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgICBpZiAoX3Jlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI5OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIiIuY29uY2F0KHNlcnZpY2UubmFtZSwgIiBIVFRQICIpLmNvbmNhdChfcmVzcG9uc2Uuc3RhdHVzKSk7CgogICAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMxOwogICAgICAgICAgICAgICAgICByZXR1cm4gX3Jlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiIi5jb25jYXQoc2VydmljZS5uYW1lLCAiXHU1NENEXHU1RTk0OiIpLCBkYXRhKTsgLy8g5aSE55CG5LiN5ZCM5pyN5Yqh55qE5ZON5bqU5qC85byPCgogICAgICAgICAgICAgICAgICBjaXR5SW5mbyA9IHZvaWQgMDsKCiAgICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNlLm5hbWUuaW5jbHVkZXMoJ0JpZ0RhdGFDbG91ZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQmlnRGF0YUNsb3VkIEFQSeagvOW8jwogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEuY2l0eSkgewogICAgICAgICAgICAgICAgICAgICAgY2l0eUluZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0X25hbWU6IF90aGlzNS5mb3JtYXRCaWdEYXRhQ2xvdWRMb2NhdGlvbk5hbWUoZGF0YSksCiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnk6IGRhdGEuY291bnRyeU5hbWUgfHwgX3RoaXM1LiR0KCdsb2NhdGlvbk1nci51bmtub3duQ291bnRyeScpLAogICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXRfYWRkcmVzczogZGF0YS5sb2NhbGl0eSB8fCBkYXRhLmNpdHkgfHwgX3RoaXM1LiR0KCdsb2NhdGlvbk1nci51bmtub3duQWRkcmVzcycpLAogICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiBkYXRhLmNpdHkgfHwgZGF0YS5sb2NhbGl0eSB8fCBfdGhpczUuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25DaXR5JyksCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBkYXRhLnByaW5jaXBhbFN1YmRpdmlzaW9uIHx8ICcnLAogICAgICAgICAgICAgICAgICAgICAgICBwb3N0Y29kZTogZGF0YS5wb3N0Y29kZSB8fCAnJwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VydmljZS5uYW1lLmluY2x1ZGVzKCdPcGVuQ2FnZScpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gT3BlbkNhZ2UgQVBJ5qC85byPCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5yZXN1bHRzICYmIGRhdGEucmVzdWx0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkYXRhLnJlc3VsdHNbMF07CiAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzID0gcmVzdWx0LmNvbXBvbmVudHMgfHwge307CiAgICAgICAgICAgICAgICAgICAgICBjaXR5SW5mbyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRfbmFtZTogX3RoaXM1LmZvcm1hdE9wZW5DYWdlTG9jYXRpb25OYW1lKGNvbXBvbmVudHMpLAogICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiBjb21wb25lbnRzLmNvdW50cnkgfHwgX3RoaXM1LiR0KCdsb2NhdGlvbk1nci51bmtub3duQ291bnRyeScpLAogICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXRfYWRkcmVzczogcmVzdWx0LmZvcm1hdHRlZCB8fCBfdGhpczUuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25BZGRyZXNzJyksCiAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6IGNvbXBvbmVudHMuY2l0eSB8fCBjb21wb25lbnRzLnRvd24gfHwgY29tcG9uZW50cy52aWxsYWdlIHx8IGNvbXBvbmVudHMuY291bnR5IHx8IF90aGlzNS4kdCgnbG9jYXRpb25NZ3IudW5rbm93bkNpdHknKSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGNvbXBvbmVudHMuc3RhdGUgfHwgY29tcG9uZW50cy5wcm92aW5jZSB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGNvZGU6IGNvbXBvbmVudHMucG9zdGNvZGUgfHwgJycKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIE5vbWluYXRpbeagvOW8jwogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhICYmIChkYXRhLmRpc3BsYXlfbmFtZSB8fCBkYXRhLm5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzID0gZGF0YS5hZGRyZXNzIHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgY2l0eUluZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0X25hbWU6IF90aGlzNS5mb3JtYXRMb2NhdGlvbk5hbWUoYWRkcmVzcyksCiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnk6IGFkZHJlc3MuY291bnRyeSB8fCBfdGhpczUuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25Db3VudHJ5JyksCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVldF9hZGRyZXNzOiBkYXRhLmRpc3BsYXlfbmFtZSB8fCBkYXRhLm5hbWUgfHwgX3RoaXM1LiR0KCdsb2NhdGlvbk1nci51bmtub3duQWRkcmVzcycpLAogICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiBhZGRyZXNzLmNpdHkgfHwgYWRkcmVzcy50b3duIHx8IGFkZHJlc3MudmlsbGFnZSB8fCBhZGRyZXNzLmNvdW50eSB8fCBfdGhpczUuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25DaXR5JyksCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBhZGRyZXNzLnN0YXRlIHx8IGFkZHJlc3MucHJvdmluY2UgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Rjb2RlOiBhZGRyZXNzLnBvc3Rjb2RlIHx8ICcnCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKCFjaXR5SW5mbykgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIiIuY29uY2F0KHNlcnZpY2UubmFtZSwgIlx1NjIxMFx1NTI5Rlx1ODNCN1x1NTNENlx1NTczMFx1NTc0MFx1NEZFMVx1NjA2RiIpKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgY2l0eUluZm8pOwoKICAgICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiIi5jb25jYXQoc2VydmljZS5uYW1lLCAiXHU2NzJBXHU4RkQ0XHU1NkRFXHU2NzA5XHU2NTQ4XHU1NzMwXHU1NzQwXHU0RkUxXHU2MDZGIikpOwoKICAgICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSA0MzoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDQzOwogICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oIiIuY29uY2F0KHNlcnZpY2UubmFtZSwgIlx1NTkzMVx1OEQyNToiKSwgX2NvbnRleHQudDAubWVzc2FnZSk7IC8vIOWmguaenOaYr+WPlua2iOivt+axgu+8jOebtOaOpeaKm+WHugoKICAgICAgICAgICAgICAgICAgaWYgKCEoX2NvbnRleHQudDAubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0ODsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQudDA7CgogICAgICAgICAgICAgICAgY2FzZSA0ODoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiY29udGludWUiLCA0OSk7CgogICAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgICAgX2krKzsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgNTI6CiAgICAgICAgICAgICAgICAgIC8vIOaJgOacieWcqOe6v+acjeWKoemDveWksei0peS6hu+8jOmZjee6p+WIsOemu+e6v+aooeW8jwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5omA5pyJ5Zyo57q/5Zyw55CG57yW56CB5pyN5Yqh6YO95aSx6LSl77yM6ZmN57qn5Yiw56a757q/5qih5byPJyk7CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5omA5pyJ5Zyo57q/5Zyw55CG57yW56CB5pyN5Yqh6YO95LiN5Y+v55SoJyk7CgogICAgICAgICAgICAgICAgY2FzZSA1NDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzQsIDQzXV0pOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRyeUdlb2NvZGluZygpIHsKICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpOyAvLyDliJvlu7rluKbotoXml7bnmoRQcm9taXNlCgoKICAgICAgdmFyIHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKF8sIHJlamVjdCkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoJ+WcqOe6v+WcsOeQhue8lueggei2heaXticpKTsKICAgICAgICB9LCA2MDAwKTsgLy8gNuenkui2heaXtgogICAgICB9KTsKICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbdHJ5R2VvY29kaW5nKCksIHRpbWVvdXRQcm9taXNlXSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS53YXJuKCflnKjnur/lnLDnkIbnvJbnoIHlpLHotKXvvIzpmY3nuqfliLDnprvnur/mqKHlvI86JywgZXJyb3IubWVzc2FnZSk7IC8vIOWmguaenOaYr+WPlua2iOivt+axgu+8jOebtOaOpeaKm+WHugoKICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7CiAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9IC8vIOmZjee6p+WIsOemu+e6v+aooeW8jwoKCiAgICAgICAgcmV0dXJuIF90aGlzNS5nZW5lcmF0ZU9mZmxpbmVMb2NhdGlvbkluZm8ocG9zaXRpb24pOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyDmuIXpmaTliqDovb3nirbmgIEKICAgICAgICBfdGhpczUuZ2VvQ29kZUxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKF90aGlzNS5hYm9ydENvbnRyb2xsZXIgPT09IGFib3J0Q29udHJvbGxlcikgewogICAgICAgICAgX3RoaXM1LmFib3J0Q29udHJvbGxlciA9IG51bGw7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyBKU09OUOi+heWKqeaWueazlQogICAgZmV0Y2hXaXRoSlNPTlA6IGZ1bmN0aW9uIGZldGNoV2l0aEpTT05QKHVybCkgewogICAgICB2YXIgdGltZW91dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogODAwMDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgY2FsbGJhY2tOYW1lID0gJ2pzb25wX2NhbGxiYWNrXycgKyBNYXRoLnJvdW5kKDEwMDAwMCAqIE1hdGgucmFuZG9tKCkpOwogICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgLy8g6K6+572u6LaF5pe2CgogICAgICAgIHZhciB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNsZWFudXAoKTsKICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0pTT05Q6K+35rGC6LaF5pe2JykpOwogICAgICAgIH0sIHRpbWVvdXQpOyAvLyDmuIXnkIblh73mlbAKCiAgICAgICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwKCkgewogICAgICAgICAgaWYgKHNjcmlwdC5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHdpbmRvd1tjYWxsYmFja05hbWVdKSB7CiAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbY2FsbGJhY2tOYW1lXTsKICAgICAgICAgIH0KCiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTsKICAgICAgICB9OyAvLyDorr7nva7lm57osIMKCgogICAgICAgIHdpbmRvd1tjYWxsYmFja05hbWVdID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGNsZWFudXAoKTsKICAgICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgICAgfTsgLy8g5aSE55CG6ZSZ6K+vCgoKICAgICAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNsZWFudXAoKTsKICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0pTT05Q6ISa5pys5Yqg6L295aSx6LSlJykpOwogICAgICAgIH07IC8vIOaJp+ihjOivt+axgiAtIOS/ruWkjeWbnuiwg+WHveaVsOWQjeensOabv+aNogoKCiAgICAgICAgdmFyIGZpbmFsVXJsID0gdXJsLnJlcGxhY2UoJ0NBTExCQUNLX1BMQUNFSE9MREVSJywgY2FsbGJhY2tOYW1lKTsKICAgICAgICBzY3JpcHQuc3JjID0gZmluYWxVcmw7CiAgICAgICAgY29uc29sZS5sb2coJ0pTT05Q6K+35rGCVVJMOicsIGZpbmFsVXJsKTsKICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOemu+e6v+WcsOeQhue8lueggQogICAgZ2V0T2ZmbGluZUdlb2NvZGluZ0luZm86IGZ1bmN0aW9uIGdldE9mZmxpbmVHZW9jb2RpbmdJbmZvKHBvc2l0aW9uKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coJ+S9v+eUqOemu+e6v+WcsOeQhue8lueggScpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAvLyDmqKHmi5/nn63mmoLnmoTliqDovb3ml7bpl7QKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOWfuuS6juWdkOagh+eUn+aIkOWfuuacrOWcsOeQhuS/oeaBrwogICAgICAgICAgdmFyIGNpdHlJbmZvID0gX3RoaXM2LmdlbmVyYXRlT2ZmbGluZUxvY2F0aW9uSW5mbyhwb3NpdGlvbik7CgogICAgICAgICAgY29uc29sZS5sb2coJ+emu+e6v+S9jee9ruS/oeaBr+eUn+aIkDonLCBjaXR5SW5mby5zaG9ydF9uYW1lKTsKICAgICAgICAgIHJlc29sdmUoY2l0eUluZm8pOwogICAgICAgIH0sIDIwMCk7IC8vIDIwMG1z5bu26L+f77yM5o+Q5L6b6Imv5aW955qE55So5oi35L2T6aqMCiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOa4hemZpOWKoOi9veeKtuaAgQogICAgICAgIF90aGlzNi5nZW9Db2RlTG9hZGluZyA9IGZhbHNlOwogICAgICAgIF90aGlzNi5hYm9ydENvbnRyb2xsZXIgPSBudWxsOwogICAgICB9KTsKICAgIH0sCiAgICBnZW5lcmF0ZU9mZmxpbmVMb2NhdGlvbkluZm86IGZ1bmN0aW9uIGdlbmVyYXRlT2ZmbGluZUxvY2F0aW9uSW5mbyhwb3NpdGlvbikgewogICAgICB2YXIgbGF0ID0gcG9zaXRpb24ubGF0OwogICAgICB2YXIgbG5nID0gcG9zaXRpb24ubG5nOyAvLyDnoa7lrprlpKfoh7TnmoTlnLDnkIbljLrln58KCiAgICAgIHZhciByZWdpb25JbmZvID0gdGhpcy5kZXRlcm1pbmVSZWdpb24obGF0LCBsbmcpOyAvLyDnlJ/miJDkvY3nva7lkI3np7AKCiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSAiIi5jb25jYXQocmVnaW9uSW5mby5yZWdpb24sICJcdTU3MzBcdTUzM0EiKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzaG9ydF9uYW1lOiBsb2NhdGlvbk5hbWUsCiAgICAgICAgY291bnRyeTogcmVnaW9uSW5mby5jb3VudHJ5LAogICAgICAgIHN0cmVldF9hZGRyZXNzOiAiXHU1NzUwXHU2ODA3OiAiLmNvbmNhdChsYXQudG9GaXhlZCg2KSwgIiwgIikuY29uY2F0KGxuZy50b0ZpeGVkKDYpKSwKICAgICAgICBjaXR5OiByZWdpb25JbmZvLmNpdHksCiAgICAgICAgc3RhdGU6IHJlZ2lvbkluZm8uc3RhdGUsCiAgICAgICAgcG9zdGNvZGU6ICcnCiAgICAgIH07CiAgICB9LAogICAgZGV0ZXJtaW5lUmVnaW9uOiBmdW5jdGlvbiBkZXRlcm1pbmVSZWdpb24obGF0LCBsbmcpIHsKICAgICAgLy8g5Z+65LqO5Z2Q5qCH6IyD5Zu056Gu5a6a5aSn6Ie05Zyw55CG5Yy65Z+f77yI56a757q/6YC76L6R77yJCiAgICAgIC8vIOS4reWbveWMuuWfn+WIpOaWrQogICAgICBpZiAobGF0ID49IDE4ICYmIGxhdCA8PSA1NCAmJiBsbmcgPj0gNzMgJiYgbG5nIDw9IDEzNSkgewogICAgICAgIGlmIChsYXQgPj0gMzkuNCAmJiBsYXQgPD0gNDEuMSAmJiBsbmcgPj0gMTE1LjQgJiYgbG5nIDw9IDExNy41KSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZWdpb246IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmJlaWppbmcnKSwKICAgICAgICAgICAgY291bnRyeTogdGhpcy4kdCgnbG9jYXRpb25NZ3IuY2hpbmEnKSwKICAgICAgICAgICAgY2l0eTogdGhpcy4kdCgnbG9jYXRpb25NZ3IuYmVpamluZ0NpdHknKSwKICAgICAgICAgICAgc3RhdGU6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmJlaWppbmdDaXR5JykKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIGlmIChsYXQgPj0gMzAuOCAmJiBsYXQgPD0gMzEuOSAmJiBsbmcgPj0gMTIwLjkgJiYgbG5nIDw9IDEyMi4wKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZWdpb246IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnNoYW5naGFpJyksCiAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmNoaW5hJyksCiAgICAgICAgICAgIGNpdHk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnNoYW5naGFpQ2l0eScpLAogICAgICAgICAgICBzdGF0ZTogdGhpcy4kdCgnbG9jYXRpb25NZ3Iuc2hhbmdoYWlDaXR5JykKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIGlmIChsYXQgPj0gMjIuNCAmJiBsYXQgPD0gMjMuNiAmJiBsbmcgPj0gMTEzLjggJiYgbG5nIDw9IDExNC42KSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZWdpb246IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnNoZW56aGVuJyksCiAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmNoaW5hJyksCiAgICAgICAgICAgIGNpdHk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnNoZW56aGVuQ2l0eScpLAogICAgICAgICAgICBzdGF0ZTogdGhpcy4kdCgnbG9jYXRpb25NZ3IuZ3Vhbmdkb25nUHJvdmluY2UnKQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgaWYgKGxhdCA+PSAzMC4xICYmIGxhdCA8PSAzMC45ICYmIGxuZyA+PSAxMDMuOSAmJiBsbmcgPD0gMTA0LjkpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJlZ2lvbjogdGhpcy4kdCgnbG9jYXRpb25NZ3IuY2hlbmdkdScpLAogICAgICAgICAgICBjb3VudHJ5OiB0aGlzLiR0KCdsb2NhdGlvbk1nci5jaGluYScpLAogICAgICAgICAgICBjaXR5OiB0aGlzLiR0KCdsb2NhdGlvbk1nci5jaGVuZ2R1Q2l0eScpLAogICAgICAgICAgICBzdGF0ZTogdGhpcy4kdCgnbG9jYXRpb25NZ3Iuc2ljaHVhblByb3ZpbmNlJykKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIGlmIChsYXQgPj0gMjIuMCAmJiBsYXQgPD0gMjMuNiAmJiBsbmcgPj0gMTEyLjkgJiYgbG5nIDw9IDExNC4wKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZWdpb246IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmd1YW5nemhvdScpLAogICAgICAgICAgICBjb3VudHJ5OiB0aGlzLiR0KCdsb2NhdGlvbk1nci5jaGluYScpLAogICAgICAgICAgICBjaXR5OiB0aGlzLiR0KCdsb2NhdGlvbk1nci5ndWFuZ3pob3VDaXR5JyksCiAgICAgICAgICAgIHN0YXRlOiB0aGlzLiR0KCdsb2NhdGlvbk1nci5ndWFuZ2RvbmdQcm92aW5jZScpCiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZWdpb246IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmNoaW5hJyksCiAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmNoaW5hJyksCiAgICAgICAgICAgIGNpdHk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25DaXR5JyksCiAgICAgICAgICAgIHN0YXRlOiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duUHJvdmluY2UnKQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0gLy8g5YW25LuW5Li76KaB5Zu95a62L+WcsOWMugoKCiAgICAgIGlmIChsYXQgPj0gMjQuNSAmJiBsYXQgPD0gNDkuNCAmJiBsbmcgPj0gLTEyNSAmJiBsbmcgPD0gLTY2KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHJlZ2lvbjogdGhpcy4kdCgnbG9jYXRpb25NZ3IudXNhJyksCiAgICAgICAgICBjb3VudHJ5OiB0aGlzLiR0KCdsb2NhdGlvbk1nci51c2EnKSwKICAgICAgICAgIGNpdHk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25DaXR5JyksCiAgICAgICAgICBzdGF0ZTogdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93blN0YXRlJykKICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKGxhdCA+PSA0NS44ICYmIGxhdCA8PSA3MS4wICYmIGxuZyA+PSAtMTQxICYmIGxuZyA8PSAtNTIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcmVnaW9uOiB0aGlzLiR0KCdsb2NhdGlvbk1nci5jYW5hZGEnKSwKICAgICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmNhbmFkYScpLAogICAgICAgICAgY2l0eTogdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93bkNpdHknKSwKICAgICAgICAgIHN0YXRlOiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duUHJvdmluY2UnKQogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAobGF0ID49IDM1LjggJiYgbGF0IDw9IDQ1LjYgJiYgbG5nID49IDEzOC43ICYmIGxuZyA8PSAxNDYuMCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICByZWdpb246IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmphcGFuJyksCiAgICAgICAgICBjb3VudHJ5OiB0aGlzLiR0KCdsb2NhdGlvbk1nci5qYXBhbicpLAogICAgICAgICAgY2l0eTogdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93bkNpdHknKSwKICAgICAgICAgIHN0YXRlOiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duUHJlZmVjdHVyZScpCiAgICAgICAgfTsKICAgICAgfSBlbHNlIGlmIChsYXQgPj0gMzMuMCAmJiBsYXQgPD0gMzguNiAmJiBsbmcgPj0gMTI0LjYgJiYgbG5nIDw9IDEzMC45KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHJlZ2lvbjogdGhpcy4kdCgnbG9jYXRpb25NZ3Iua29yZWEnKSwKICAgICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmtvcmVhJyksCiAgICAgICAgICBjaXR5OiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duQ2l0eScpLAogICAgICAgICAgc3RhdGU6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25Qcm92aW5jZScpCiAgICAgICAgfTsKICAgICAgfSBlbHNlIGlmIChsYXQgPj0gMzYuMCAmJiBsYXQgPD0gNzEuMiAmJiBsbmcgPj0gLTExLjAgJiYgbG5nIDw9IDMyLjApIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcmVnaW9uOiB0aGlzLiR0KCdsb2NhdGlvbk1nci5ldXJvcGUnKSwKICAgICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmV1cm9wZScpLAogICAgICAgICAgY2l0eTogdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93bkNpdHknKSwKICAgICAgICAgIHN0YXRlOiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duUmVnaW9uJykKICAgICAgICB9OwogICAgICB9IC8vIOagueaNrue7j+e6rOW6puehruWumuWkp+a0sgoKCiAgICAgIGlmIChsYXQgPj0gLTU1ICYmIGxhdCA8PSA3MSkgewogICAgICAgIGlmIChsbmcgPj0gLTE2OCAmJiBsbmcgPD0gLTMwKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZWdpb246IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmFtZXJpY2FzJyksCiAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmFtZXJpY2FzJyksCiAgICAgICAgICAgIGNpdHk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25DaXR5JyksCiAgICAgICAgICAgIHN0YXRlOiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duUmVnaW9uJykKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIGlmIChsbmcgPj0gLTExICYmIGxuZyA8PSAxODApIHsKICAgICAgICAgIGlmIChsYXQgPj0gLTQ3ICYmIGxuZyA+PSAxMTApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICByZWdpb246IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLm9jZWFuaWEnKSwKICAgICAgICAgICAgICBjb3VudHJ5OiB0aGlzLiR0KCdsb2NhdGlvbk1nci5vY2VhbmlhJyksCiAgICAgICAgICAgICAgY2l0eTogdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93bkNpdHknKSwKICAgICAgICAgICAgICBzdGF0ZTogdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93blJlZ2lvbicpCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIHJlZ2lvbjogdGhpcy4kdCgnbG9jYXRpb25NZ3IuYXNpYScpLAogICAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmFzaWEnKSwKICAgICAgICAgICAgICBjaXR5OiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duQ2l0eScpLAogICAgICAgICAgICAgIHN0YXRlOiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duUmVnaW9uJykKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAobGF0ID49IC01NSAmJiBsYXQgPD0gMzcgJiYgbG5nID49IC0yMCAmJiBsbmcgPD0gNTUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcmVnaW9uOiB0aGlzLiR0KCdsb2NhdGlvbk1nci5hZnJpY2EnKSwKICAgICAgICAgIGNvdW50cnk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmFmcmljYScpLAogICAgICAgICAgY2l0eTogdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93bkNpdHknKSwKICAgICAgICAgIHN0YXRlOiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duUmVnaW9uJykKICAgICAgICB9OwogICAgICB9IC8vIOm7mOiupOS9jee9rgoKCiAgICAgIHJldHVybiB7CiAgICAgICAgcmVnaW9uOiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duJyksCiAgICAgICAgY291bnRyeTogdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93blJlZ2lvbicpLAogICAgICAgIGNpdHk6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25DaXR5JyksCiAgICAgICAgc3RhdGU6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLnVua25vd25SZWdpb24nKQogICAgICB9OwogICAgfSwKICAgIGZvcm1hdExvY2F0aW9uTmFtZTogZnVuY3Rpb24gZm9ybWF0TG9jYXRpb25OYW1lKGFkZHJlc3MpIHsKICAgICAgLy8g5qC85byP5YyW5L2N572u5ZCN56ew77yM5LyY5YWI5pi+56S65Z+O5biC5L+h5oGvCiAgICAgIHZhciBjaXR5ID0gYWRkcmVzcy5jaXR5IHx8IGFkZHJlc3MudG93biB8fCBhZGRyZXNzLnZpbGxhZ2UgfHwgYWRkcmVzcy5jb3VudHk7CiAgICAgIHZhciBzdGF0ZSA9IGFkZHJlc3Muc3RhdGUgfHwgYWRkcmVzcy5wcm92aW5jZTsKICAgICAgdmFyIGNvdW50cnkgPSBhZGRyZXNzLmNvdW50cnk7CgogICAgICBpZiAoY2l0eSAmJiBzdGF0ZSkgewogICAgICAgIHJldHVybiAiIi5jb25jYXQoY2l0eSwgIiwgIikuY29uY2F0KHN0YXRlKTsKICAgICAgfSBlbHNlIGlmIChjaXR5KSB7CiAgICAgICAgcmV0dXJuIGNpdHk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUpIHsKICAgICAgICByZXR1cm4gc3RhdGU7CiAgICAgIH0gZWxzZSBpZiAoY291bnRyeSkgewogICAgICAgIHJldHVybiBjb3VudHJ5OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duTG9jYXRpb24nKTsKICAgICAgfQogICAgfSwKICAgIGZvcm1hdEJpZ0RhdGFDbG91ZExvY2F0aW9uTmFtZTogZnVuY3Rpb24gZm9ybWF0QmlnRGF0YUNsb3VkTG9jYXRpb25OYW1lKGRhdGEpIHsKICAgICAgLy8g5qC85byP5YyWQmlnRGF0YUNsb3VkIEFQSeeahOS9jee9ruWQjeensAogICAgICB2YXIgY2l0eSA9IGRhdGEuY2l0eSB8fCBkYXRhLmxvY2FsaXR5OwogICAgICB2YXIgc3RhdGUgPSBkYXRhLnByaW5jaXBhbFN1YmRpdmlzaW9uOwogICAgICB2YXIgY291bnRyeSA9IGRhdGEuY291bnRyeU5hbWU7CgogICAgICBpZiAoY2l0eSAmJiBzdGF0ZSkgewogICAgICAgIHJldHVybiAiIi5jb25jYXQoY2l0eSwgIiwgIikuY29uY2F0KHN0YXRlKTsKICAgICAgfSBlbHNlIGlmIChjaXR5KSB7CiAgICAgICAgcmV0dXJuIGNpdHk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUpIHsKICAgICAgICByZXR1cm4gc3RhdGU7CiAgICAgIH0gZWxzZSBpZiAoY291bnRyeSkgewogICAgICAgIHJldHVybiBjb3VudHJ5OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLiR0KCdsb2NhdGlvbk1nci51bmtub3duTG9jYXRpb24nKTsKICAgICAgfQogICAgfSwKICAgIGZvcm1hdE9wZW5DYWdlTG9jYXRpb25OYW1lOiBmdW5jdGlvbiBmb3JtYXRPcGVuQ2FnZUxvY2F0aW9uTmFtZShjb21wb25lbnRzKSB7CiAgICAgIC8vIOagvOW8j+WMlk9wZW5DYWdlIEFQSeeahOS9jee9ruWQjeensAogICAgICB2YXIgY2l0eSA9IGNvbXBvbmVudHMuY2l0eSB8fCBjb21wb25lbnRzLnRvd24gfHwgY29tcG9uZW50cy52aWxsYWdlIHx8IGNvbXBvbmVudHMuY291bnR5OwogICAgICB2YXIgc3RhdGUgPSBjb21wb25lbnRzLnN0YXRlIHx8IGNvbXBvbmVudHMucHJvdmluY2U7CiAgICAgIHZhciBjb3VudHJ5ID0gY29tcG9uZW50cy5jb3VudHJ5OwoKICAgICAgaWYgKGNpdHkgJiYgc3RhdGUpIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KGNpdHksICIsICIpLmNvbmNhdChzdGF0ZSk7CiAgICAgIH0gZWxzZSBpZiAoY2l0eSkgewogICAgICAgIHJldHVybiBjaXR5OwogICAgICB9IGVsc2UgaWYgKHN0YXRlKSB7CiAgICAgICAgcmV0dXJuIHN0YXRlOwogICAgICB9IGVsc2UgaWYgKGNvdW50cnkpIHsKICAgICAgICByZXR1cm4gY291bnRyeTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy4kdCgnbG9jYXRpb25NZ3IudW5rbm93bkxvY2F0aW9uJyk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRNYXBTdGF0dXNDb2xvcjogZnVuY3Rpb24gZ2V0TWFwU3RhdHVzQ29sb3IoKSB7CiAgICAgIHN3aXRjaCAodGhpcy5jdXJyZW50TWFwVHlwZSkgewogICAgICAgIGNhc2UgJ29ubGluZSc6CiAgICAgICAgICByZXR1cm4gJ2dyZWVuJzsKCiAgICAgICAgY2FzZSAnb2ZmbGluZSc6CiAgICAgICAgICByZXR1cm4gdGhpcy51c2VPbmxpbmVNYXAgPyAnb3JhbmdlJyA6ICdibHVlJzsKCiAgICAgICAgY2FzZSAnY2hlY2tpbmcnOgogICAgICAgICAgcmV0dXJuICdncmV5JzsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAncmVkJzsKICAgICAgfQogICAgfSwKICAgIGdldE1hcFN0YXR1c0ljb246IGZ1bmN0aW9uIGdldE1hcFN0YXR1c0ljb24oKSB7CiAgICAgIHN3aXRjaCAodGhpcy5jdXJyZW50TWFwVHlwZSkgewogICAgICAgIGNhc2UgJ29ubGluZSc6CiAgICAgICAgICByZXR1cm4gJ21kaS1jbG91ZC1jaGVjayc7CgogICAgICAgIGNhc2UgJ29mZmxpbmUnOgogICAgICAgICAgcmV0dXJuICdtZGktY2xvdWQtb2ZmJzsKCiAgICAgICAgY2FzZSAnY2hlY2tpbmcnOgogICAgICAgICAgcmV0dXJuICdtZGktbG9hZGluZyBtZGktc3Bpbic7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gJ21kaS1hbGVydC1jaXJjbGUnOwogICAgICB9CiAgICB9LAogICAgZ2V0TWFwU3RhdHVzVGV4dDogZnVuY3Rpb24gZ2V0TWFwU3RhdHVzVGV4dCgpIHsKICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRNYXBUeXBlKSB7CiAgICAgICAgY2FzZSAnb25saW5lJzoKICAgICAgICAgIHJldHVybiB0aGlzLiR0KCdsb2NhdGlvbk1nci5vbmxpbmVNYXAnKTsKCiAgICAgICAgY2FzZSAnb2ZmbGluZSc6CiAgICAgICAgICByZXR1cm4gdGhpcy51c2VPbmxpbmVNYXAgPyB0aGlzLiR0KCdsb2NhdGlvbk1nci5vZmZsaW5lTWFwRmFsbGJhY2snKSA6IHRoaXMuJHQoJ2xvY2F0aW9uTWdyLm9mZmxpbmVNYXAnKTsKCiAgICAgICAgY2FzZSAnY2hlY2tpbmcnOgogICAgICAgICAgcmV0dXJuIHRoaXMuJHQoJ2xvY2F0aW9uTWdyLmNoZWNraW5nJyk7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gdGhpcy4kdCgnbG9jYXRpb25NZ3IuY29ubmVjdGlvbkZhaWxlZCcpOwogICAgICB9CiAgICB9LAogICAgb25NYXBUeXBlVG9nZ2xlOiBmdW5jdGlvbiBvbk1hcFR5cGVUb2dnbGUoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgLy8g55So5oi35YiH5o2i5Zyw5Zu+5qih5byPCiAgICAgIGNvbnNvbGUubG9nKCfnlKjmiLfliIfmjaLlnLDlm77mqKHlvI/kuLo6JywgdGhpcy51c2VPbmxpbmVNYXAgPyAn5Zyo57q/5Zyw5Zu+JyA6ICfnprvnur/lnLDlm74nKTsKCiAgICAgIGlmICh0aGlzLnVzZU9ubGluZU1hcCkgewogICAgICAgIC8vIOeUqOaIt+mAieaLqeWcqOe6v+aooeW8j++8jOajgOa1i+e9kee7nOW5tuWwneivleS9v+eUqOWcqOe6v+WcsOWbvgogICAgICAgIHRoaXMuZGV0ZWN0QW5kU2V0TWFwVHlwZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOeUqOaIt+mAieaLqeemu+e6v+aooeW8j++8jOebtOaOpeWIh+aNouWIsOemu+e6v+WcsOWbvgogICAgICAgIHRoaXMuY3VycmVudE1hcFR5cGUgPSAnb2ZmbGluZSc7CiAgICAgICAgdGhpcy51cmwgPSB0aGlzLmZhbGxiYWNrVXJsOwogICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIOeUqOaIt+aJi+WKqOmAieaLqeemu+e6v+WcsOWbvicpOyAvLyDmm7TmlrDnvKnmlL7pmZDliLYKCiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzNy4kcmVmcy5teU1hcCAmJiBfdGhpczcuJHJlZnMubXlNYXAubWFwT2JqZWN0KSB7CiAgICAgICAgICAgIHZhciBtYXAgPSBfdGhpczcuJHJlZnMubXlNYXAubWFwT2JqZWN0OwogICAgICAgICAgICBtYXAuaW52YWxpZGF0ZVNpemUoKTsKCiAgICAgICAgICAgIF90aGlzNy51cGRhdGVab29tTGltaXRzKG1hcCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnvZHnu5zov57mjqXmo4DmtYsKICAgIGNoZWNrTmV0d29ya0Nvbm5lY3Rpb246IGZ1bmN0aW9uIGNoZWNrTmV0d29ya0Nvbm5lY3Rpb24oKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIC8vIOaWueazlTE6IOajgOa1i25hdmlnYXRvci5vbkxpbmUKICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfnvZHnu5zmo4DmtYs6IG5hdmlnYXRvci5vbkxpbmXkuLpmYWxzZScpOwogICAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyDmlrnms5UyOiDlsJ3or5Xorr/pl67lnLDnkIbnvJbnoIHmnI3liqHmnaXmtYvor5XnvZHnu5wKCgogICAgICAgIHZhciB0ZXN0VXJscyA9IFsvLyDnm7TmjqXmtYvor5XlnLDnkIbnvJbnoIHmnI3liqEKICAgICAgICAnaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvcmV2ZXJzZT9mb3JtYXQ9anNvbiZsYXQ9NDAmbG9uPTExNiZhY2NlcHQtbGFuZ3VhZ2U9ZW4nLCAvLyDlpIfnlKjmtYvor5UKICAgICAgICAnaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvZmF2aWNvbi5pY28nXTsKICAgICAgICB2YXIgY29tcGxldGVkID0gMDsKICAgICAgICB2YXIgaGFzU3VjY2VzcyA9IGZhbHNlOwogICAgICAgIHZhciB0aW1lb3V0ID0gMzAwMDsgLy8g5YeP5bCR5YiwM+enkui2heaXtgoKICAgICAgICB0ZXN0VXJscy5mb3JFYWNoKGZ1bmN0aW9uICh1cmwsIGluZGV4KSB7CiAgICAgICAgICAvLyDkvb/nlKhmZXRjaOa1i+ivle+8jOabtOWHhuehrgogICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7CiAgICAgICAgICB2YXIgdGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLmFib3J0KCk7CiAgICAgICAgICB9LCB0aW1lb3V0KTsKICAgICAgICAgIGZldGNoKHVybCwgewogICAgICAgICAgICBtZXRob2Q6ICdIRUFEJywKICAgICAgICAgICAgbW9kZTogJ25vLWNvcnMnLAogICAgICAgICAgICAvLyDpgb/lhY1DT1JT6Zeu6aKYCiAgICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsCiAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7CgogICAgICAgICAgICBpZiAoIWhhc1N1Y2Nlc3MpIHsKICAgICAgICAgICAgICBoYXNTdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiXHU3RjUxXHU3RURDXHU2OEMwXHU2RDRCOiAiLmNvbmNhdCh1cmwsICIgXHU4RkRFXHU2M0E1XHU2MjEwXHU1MjlGIikpOwogICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTsKICAgICAgICAgICAgY29tcGxldGVkKys7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJcdTdGNTFcdTdFRENcdTY4QzBcdTZENEI6ICIuY29uY2F0KHVybCwgIiBcdThGREVcdTYzQTVcdTU5MzFcdThEMjU6IiksIGVycm9yLm5hbWUpOwoKICAgICAgICAgICAgaWYgKGNvbXBsZXRlZCA9PT0gdGVzdFVybHMubGVuZ3RoICYmICFoYXNTdWNjZXNzKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+e9kee7nOajgOa1izog5omA5pyJ5rWL6K+V6YO95aSx6LSl77yM5Yik5a6a572R57uc5LiN5Y+v55SoJyk7CiAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOyAvLyDmgLvkvZPotoXml7YKCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoIWhhc1N1Y2Nlc3MpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+e9kee7nOajgOa1izog6LaF5pe277yM5Yik5a6a572R57uc5LiN5Y+v55SoJyk7CiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0sIHRpbWVvdXQgKyA1MDApOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmo4DmtYvlnKjnur/lnLDlm77lj6/nlKjmgKcKICAgIGNoZWNrT25saW5lTWFwQXZhaWxhYmlsaXR5OiBmdW5jdGlvbiBjaGVja09ubGluZU1hcEF2YWlsYWJpbGl0eSgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgdmFyIHRlc3RVcmxzID0gWydodHRwczovL2EudGlsZS5vcGVuc3RyZWV0bWFwLm9yZy8wLzAvMC5wbmcnLCAnaHR0cHM6Ly9iLnRpbGUub3BlbnN0cmVldG1hcC5vcmcvMC8wLzAucG5nJywgJ2h0dHBzOi8vYy50aWxlLm9wZW5zdHJlZXRtYXAub3JnLzAvMC8wLnBuZyddOwogICAgICAgIHZhciBjb21wbGV0ZWQgPSAwOwogICAgICAgIHZhciBoYXNTdWNjZXNzID0gZmFsc2U7CiAgICAgICAgdGVzdFVybHMuZm9yRWFjaChmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgbWV0aG9kOiAnSEVBRCcsCiAgICAgICAgICAgIG1vZGU6ICduby1jb3JzJywKICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWhhc1N1Y2Nlc3MpIHsKICAgICAgICAgICAgICBoYXNTdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbXBsZXRlZCsrOwoKICAgICAgICAgICAgaWYgKGNvbXBsZXRlZCA9PT0gdGVzdFVybHMubGVuZ3RoICYmICFoYXNTdWNjZXNzKSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOyAvLyAz56eS6LaF5pe2CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCFoYXNTdWNjZXNzKSB7CiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0sIDMwMDApOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmo4DmtYvlubborr7nva7lnLDlm77nsbvlnovvvIjku4XlnKjnlKjmiLfpgInmi6nlnKjnur/mqKHlvI/ml7bosIPnlKjvvIkKICAgIGRldGVjdEFuZFNldE1hcFR5cGU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9kZXRlY3RBbmRTZXRNYXBUeXBlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE1hcFR5cGUgPSAnY2hlY2tpbmcnOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+ajgOa1i+WcqOe6v+WcsOWbvuWPr+eUqOaApy4uLicpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tOZXR3b3JrQ29ubmVjdGlvbigpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICB0aGlzLmlzTmV0d29ya0Nvbm5lY3RlZCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+e9kee7nOi/nuaOpeeKtuaAgTonLCB0aGlzLmlzTmV0d29ya0Nvbm5lY3RlZCk7CgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTmV0d29ya0Nvbm5lY3RlZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tPbmxpbmVNYXBBdmFpbGFiaWxpdHkoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHRoaXMuaXNPbmxpbmVNYXBBdmFpbGFibGUgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflnKjnur/lnLDlm77lj6/nlKjmgKc6JywgdGhpcy5pc09ubGluZU1hcEF2YWlsYWJsZSk7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPbmxpbmVNYXBBdmFpbGFibGUpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TWFwVHlwZSA9ICdvbmxpbmUnOwogICAgICAgICAgICAgICAgICB0aGlzLnVybCA9IHRoaXMub25saW5lVXJsOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIOS9v+eUqOWcqOe6v+WcsOWbvicpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TWFwVHlwZSA9ICdvZmZsaW5lJzsKICAgICAgICAgICAgICAgICAgdGhpcy51cmwgPSB0aGlzLmZhbGxiYWNrVXJsOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIOWcqOe6v+WcsOWbvuS4jeWPr+eUqO+8jOiHquWKqOmZjee6p+WIsOemu+e6v+WcsOWbvicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIC8vIOe9kee7nOS4jeWPr+eUqO+8jOmZjee6p+WIsOemu+e6v+WcsOWbvgogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TWFwVHlwZSA9ICdvZmZsaW5lJzsKICAgICAgICAgICAgICAgIHRoaXMudXJsID0gdGhpcy5mYWxsYmFja1VybDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OhIOe9kee7nOS4jeWPr+eUqO+8jOiHquWKqOmZjee6p+WIsOemu+e6v+WcsOWbvicpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgLy8g5pu05paw5Zyw5Zu+CiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczguJHJlZnMubXlNYXAgJiYgX3RoaXM4LiRyZWZzLm15TWFwLm1hcE9iamVjdCkgewogICAgICAgICAgICAgICAgICAgIHZhciBtYXAgPSBfdGhpczguJHJlZnMubXlNYXAubWFwT2JqZWN0OwogICAgICAgICAgICAgICAgICAgIG1hcC5pbnZhbGlkYXRlU2l6ZSgpOyAvLyDmoLnmja7mlrDnmoTlnLDlm77nsbvlnovmm7TmlrDnvKnmlL7pmZDliLYKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnVwZGF0ZVpvb21MaW1pdHMobWFwKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDIxOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5Zyw5Zu+5qOA5rWL5aSx6LSlOicsIF9jb250ZXh0Mi50MCk7CiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRNYXBUeXBlID0gJ29mZmxpbmUnOwogICAgICAgICAgICAgICAgdGhpcy51cmwgPSB0aGlzLmZhbGxiYWNrVXJsOwogICAgICAgICAgICAgICAgdGhpcy5pc05ldHdvcmtDb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuaXNPbmxpbmVNYXBBdmFpbGFibGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinYwg5qOA5rWL5aSx6LSl77yM6ZmN57qn5Yiw56a757q/5Zyw5Zu+Jyk7CgogICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbMiwgMjFdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRldGVjdEFuZFNldE1hcFR5cGUoKSB7CiAgICAgICAgcmV0dXJuIF9kZXRlY3RBbmRTZXRNYXBUeXBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZXRlY3RBbmRTZXRNYXBUeXBlOwogICAgfSgpLAogICAgLy8g5ZCv5Yqo572R57uc54q25oCB55uR5o6nCiAgICBzdGFydE5ldHdvcmtNb25pdG9yaW5nOiBmdW5jdGlvbiBzdGFydE5ldHdvcmtNb25pdG9yaW5nKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIC8vIOebkeWQrOe9kee7nOeKtuaAgeWPmOWMluS6i+S7tu+8iOi/meS6m+aYr+ecn+ato+eahOe9kee7nOeKtuaAgeWPmOWMlu+8iQogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCfns7vnu5/nvZHnu5zov57mjqXmgaLlpI0nKTsgLy8g5Y+q5pyJ5Zyo55So5oi35YGP5aW95Zyo57q/5Zyw5Zu+5pe25omN6YeN5paw5qOA5rWLCgogICAgICAgIGlmIChfdGhpczkudXNlT25saW5lTWFwKSB7CiAgICAgICAgICBfdGhpczkuZGV0ZWN0QW5kU2V0TWFwVHlwZSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCfns7vnu5/nvZHnu5zov57mjqXmlq3lvIAnKTsKICAgICAgICBfdGhpczkuaXNOZXR3b3JrQ29ubmVjdGVkID0gZmFsc2U7CiAgICAgICAgX3RoaXM5LmlzT25saW5lTWFwQXZhaWxhYmxlID0gZmFsc2U7CiAgICAgICAgX3RoaXM5LmN1cnJlbnRNYXBUeXBlID0gJ29mZmxpbmUnOwogICAgICAgIF90aGlzOS51cmwgPSBfdGhpczkuZmFsbGJhY2tVcmw7CiAgICAgIH0pOyAvLyDlrprmnJ/mo4DmtYvpopHnjoflpKfluYXpmY3kvY7vvIzpgb/lhY3popHnuYHnvZHnu5zor7fmsYIKCiAgICAgIHRoaXMubmV0d29ya0NoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8g5Y+q5pyJ5Zyo5Lul5LiL5p2h5Lu25YWo6YOo5ruh6Laz5pe25omN6YeN5paw5qOA5rWL77yaCiAgICAgICAgLy8gMS4g55So5oi36YCJ5oup5Zyo57q/5Zyw5Zu+CiAgICAgICAgLy8gMi4g5b2T5YmN5L2/55So56a757q/5Zyw5Zu+CiAgICAgICAgLy8gMy4g57O757uf5pi+56S6572R57uc5Zyo57q/CiAgICAgICAgaWYgKF90aGlzOS51c2VPbmxpbmVNYXAgJiYgX3RoaXM5LmN1cnJlbnRNYXBUeXBlID09PSAnb2ZmbGluZScgJiYgbmF2aWdhdG9yLm9uTGluZSkgewogICAgICAgICAgY29uc29sZS5sb2coJ+WwneivleS7juemu+e6v+aooeW8j+aBouWkjeWIsOWcqOe6v+aooeW8jycpOwoKICAgICAgICAgIF90aGlzOS5kZXRlY3RBbmRTZXRNYXBUeXBlKCk7CiAgICAgICAgfQogICAgICB9LCA2MDAwMCk7IC8vIOmZjeS9juWIsOavjzYw56eS5qOA5rWL5LiA5qyhCiAgICB9LAogICAgLy8g5ouW5ou957uT5p2f5LqL5Lu2CiAgICBkcmFnRW5kOiBmdW5jdGlvbiBkcmFnRW5kKGV2ZW50KSB7CiAgICAgIHZhciBuZXdQb3MgPSB7CiAgICAgICAgbGF0OiBldmVudC50YXJnZXQuX2xhdGxuZy5sYXQsCiAgICAgICAgbG5nOiBldmVudC50YXJnZXQuX2xhdGxuZy5sbmcsCiAgICAgICAgYWNjdXJhY3k6IDAKICAgICAgfTsKICAgICAgY29uc29sZS5sb2coJ+aLluaLvee7k+adn++8jOaWsOS9jee9rjonLCBuZXdQb3MubGF0LnRvRml4ZWQoNiksIG5ld1Bvcy5sbmcudG9GaXhlZCg2KSk7IC8vIOS9v+eUqOaWsOeahHVwZGF0ZU1hcFBvc2l0aW9u5pa55rOV5aSE55CG5ouW5ou9CgogICAgICB0aGlzLnVwZGF0ZU1hcFBvc2l0aW9uKG5ld1Bvcy5sYXQsIG5ld1Bvcy5sbmcsIHsKICAgICAgICB1cGRhdGVNYXJrZXI6IHRydWUsCiAgICAgICAgZmV0Y2hBZGRyZXNzOiB0cnVlLAogICAgICAgIGFuaW1hdGU6IGZhbHNlLAogICAgICAgIC8vIOaLluaLveaXtuS4jeS9v+eUqOWKqOeUuwogICAgICAgIGFjY3VyYWN5OiAwCiAgICAgIH0pOyAvLyDlj5HpgIHkvY3nva7ph43nva7kuovku7bvvIjkv53mjIHlkJHlkI7lhbzlrrnvvIkKICAgICAgLy8gdGhpcy4kZW1pdCgncmVzZXRMb2NhdGlvbicsIG5ld1Bvcy5sYXQsIG5ld1Bvcy5sbmcpCiAgICB9LAogICAgLy8g5L6/5o235pa55rOV77ya5b+r6YCf6Lez6L2s5Yiw5oyH5a6a5L2N572u77yI5bim5Yqo55S777yJCiAgICBmbHlUb1Bvc2l0aW9uOiBmdW5jdGlvbiBmbHlUb1Bvc2l0aW9uKGxhdCwgbG5nKSB7CiAgICAgIHZhciB6b29tID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsOwogICAgICByZXR1cm4gdGhpcy51cGRhdGVNYXBQb3NpdGlvbihsYXQsIGxuZywgewogICAgICAgIGFuaW1hdGU6IHRydWUsCiAgICAgICAgem9vbTogem9vbSwKICAgICAgICB1cGRhdGVNYXJrZXI6IHRydWUsCiAgICAgICAgZmV0Y2hBZGRyZXNzOiB0cnVlCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS+v+aNt+aWueazle+8muebtOaOpeiuvue9ruS9jee9ru+8iOaXoOWKqOeUu++8iQogICAgc2V0UG9zaXRpb246IGZ1bmN0aW9uIHNldFBvc2l0aW9uKGxhdCwgbG5nKSB7CiAgICAgIHZhciB6b29tID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsOwogICAgICByZXR1cm4gdGhpcy51cGRhdGVNYXBQb3NpdGlvbihsYXQsIGxuZywgewogICAgICAgIGFuaW1hdGU6IGZhbHNlLAogICAgICAgIHpvb206IHpvb20sCiAgICAgICAgdXBkYXRlTWFya2VyOiB0cnVlLAogICAgICAgIGZldGNoQWRkcmVzczogdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICAvLyDkvr/mjbfmlrnms5XvvJrku4Xmm7TmlrDlnLDlm77kuK3lv4PvvIjkuI3np7vliqjlnLDlm77pkonvvIkKICAgIGNlbnRlck1hcEF0OiBmdW5jdGlvbiBjZW50ZXJNYXBBdChsYXQsIGxuZykgewogICAgICB2YXIgem9vbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDsKICAgICAgdmFyIGFuaW1hdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHRydWU7CiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZU1hcFBvc2l0aW9uKGxhdCwgbG5nLCB7CiAgICAgICAgYW5pbWF0ZTogYW5pbWF0ZSwKICAgICAgICB6b29tOiB6b29tLAogICAgICAgIHVwZGF0ZU1hcmtlcjogZmFsc2UsCiAgICAgICAgZmV0Y2hBZGRyZXNzOiBmYWxzZQogICAgICB9KTsKICAgIH0sCiAgICAvLyDkvr/mjbfmlrnms5XvvJrpgJrov4flt7Lnn6XkvY3nva7lr7nosaHmm7TmlrAKICAgIHVwZGF0ZVRvS25vd25Mb2NhdGlvbjogZnVuY3Rpb24gdXBkYXRlVG9Lbm93bkxvY2F0aW9uKGxvY2F0aW9uT2JqKSB7CiAgICAgIHZhciBhbmltYXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlOwoKICAgICAgaWYgKCFsb2NhdGlvbk9iaiB8fCAhdGhpcy5pc1ZhbGlkTG9jYXRpb24obG9jYXRpb25PYmopKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5peg5pWI55qE5L2N572u5a+56LGhOicsIGxvY2F0aW9uT2JqKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZU1hcFBvc2l0aW9uKGxvY2F0aW9uT2JqLmxhdCwgbG9jYXRpb25PYmoubG5nLCB7CiAgICAgICAgYW5pbWF0ZTogYW5pbWF0ZSwKICAgICAgICB1cGRhdGVNYXJrZXI6IHRydWUsCiAgICAgICAgZmV0Y2hBZGRyZXNzOiBmYWxzZSwKICAgICAgICAvLyDlt7Lnn6XkvY3nva7pgJrluLjkuI3pnIDopoHph43mlrDojrflj5blnLDlnYAKICAgICAgICBhY2N1cmFjeTogbG9jYXRpb25PYmouYWNjdXJhY3kgfHwgMAogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIExNYXA6IExNYXAsCiAgICBMVGlsZUxheWVyOiBMVGlsZUxheWVyLAogICAgTE1hcmtlcjogTE1hcmtlciwKICAgIExDaXJjbGU6IExDaXJjbGUsCiAgICBMVG9vbHRpcDogTFRvb2x0aXAsCiAgICBMQ29udHJvbFpvb206IExDb250cm9sWm9vbQogIH0KfTs="},{"version":3,"sources":["location-mgr.vue"],"names":[],"mappings":"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","sourcesContent":["// Stellarium Web - Copyright (c) 2022 - Stellarium Labs SRL\n//\n// This program is licensed under the terms of the GNU AGPL v3, or\n// alternatively under a commercial licence.\n//\n// The terms of the AGPL v3 license can be found in the main directory of this\n// repository.\n\n/*\n - \n\n\n1. updateMapPosition(lat, lng, options) - \n   \n   - lat:  (number)\n   - lng:  (number) \n   - options:  (object)\n     - updateMarker:  (boolean, true)\n     - fetchAddress:  (boolean, true)\n     - zoom:  (number, )\n     - animate:  (boolean, true)\n     - accuracy:  (number, 0)\n\n\n2. flyToPosition(lat, lng, zoom) - \n3. setPosition(lat, lng, zoom) - \n4. centerMapAt(lat, lng, zoom, animate) - \n5. updateToKnownLocation(locationObj, animate) - \n\n\n- mapPositionUpdated: \n- addressInfoUpdated:   \n- addressInfoError: \n\n\n// \nthis.$refs.locationManager.flyToPosition(39.9042, 116.4074, 15)\nthis.$refs.locationManager.setPosition(40.7128, -74.0060)\nthis.$refs.locationManager.centerMapAt(51.5074, -0.1278, 12, false)\n\n// \n<location-mgr \n  @mapPositionUpdated=\"onPositionUpdated\"\n  @addressInfoUpdated=\"onAddressUpdated\"\n  @addressInfoError=\"onAddressError\"\n  ref=\"locationManager\">\n</location-mgr>\n\n\n<template>\n  <div>\n    <v-row justify=\"space-around\">\n      <v-col cols=\"4\" v-if=\"doShowMyLocation\">\n        <v-list two-line subheader>\n          <v-subheader>{{ $t('My Locations') }}</v-subheader>\n          <v-list-item href=\"javascript:;\" v-for=\"item in knownLocations\" v-bind:key=\"item.id\" @click.native.stop=\"selectKnownLocation(item)\" :style=\"(item && knownLocationMode && selectedKnownLocation && item.id === selectedKnownLocation.id) ? 'background-color: #455a64' : ''\">\n            <v-list-item-icon>\n              <v-icon>mdi-map-marker</v-icon>\n            </v-list-item-icon>\n            <v-list-item-content>\n              <v-list-item-title>{{ item.short_name }}</v-list-item-title>\n              <v-list-item-subtitle>{{ item.country }}</v-list-item-subtitle>\n            </v-list-item-content>\n          </v-list-item>\n        </v-list>\n      </v-col>\n      <v-col cols=\"doShowMyLocation ? 8 : 12\" >\n        <v-card class=\"blue-grey darken-2 white--text\">\n          <v-card-title primary-title>\n            <v-container fluid>\n              <v-row>\n                <!--  -->\n                <v-col>\n                  <div>\n                    <div class=\"text-h5\" style=\"overflow: hidden; white-space: nowrap; text-overflow: ellipsis;\">\n                      {{ locationForDetail ? locationForDetail.short_name + ', ' + locationForDetail.country : $t('locationMgr.selectLocation') }}\n                      <v-progress-circular v-if=\"geoCodeLoading\" indeterminate size=\"16\" width=\"2\" color=\"orange\" style=\"margin-left: 8px;\"></v-progress-circular>\n                    </div>\n                    <div class=\"grey--text text-subtitle-2\" v-if=\"locationForDetail && locationForDetail.street_address\">{{ locationForDetail.street_address }}</div>\n                    <div class=\"grey--text text-subtitle-2\">\n                      {{ hasValidSelection ? locationForDetail.lat.toFixed(5) + ' ' + locationForDetail.lng.toFixed(5) : $t('locationMgr.dragToSelect') }}\n                      <span v-if=\"geoCodeLoading\" style=\"color: #ff9800; margin-left: 8px;\">{{ $t('locationMgr.fetchingAddress') }}</span>\n                    </div>\n                  </div>\n                </v-col>\n                \n                <!--  -->\n                <v-col cols=\"auto\" style=\"min-width: 200px;\">\n                  <div class=\"d-flex flex-column\" style=\"gap: 8px;\">\n                    <!-- -  -->\n                    <div class=\"d-flex align-center justify-space-between\" style=\"width: 100%; min-height: 32px;\">\n                      <div class=\"d-flex align-center\" style=\"gap: 6px; line-height: 1;\">\n                        <v-icon :color=\"getMapStatusColor()\" size=\"16\">{{ getMapStatusIcon() }}</v-icon>\n                        <span class=\"text-caption\" :style=\"`color: ${getMapStatusColor()}; line-height: 1;`\">{{ getMapStatusText() }}</span>\n                      </div>\n                      <div class=\"d-flex align-center\">\n                        <v-switch\n                          v-model=\"useOnlineMap\"\n                          @change=\"onMapTypeToggle\"\n                          dense\n                          hide-details\n                          color=\"primary\"\n                          class=\"mt-0 pt-0\"\n                          style=\"margin-left: 12px;\"\n                        >\n                          <template v-slot:label>\n                            <span class=\"text-caption\" style=\"line-height: 1;\">{{ $t('locationMgr.onlineMap') }}</span>\n                          </template>\n                        </v-switch>\n                      </div>\n                    </div>\n                    <!--  -->\n                    <div>\n                      <v-btn \n                        @click.native.stop=\"useLocation()\" \n                        :disabled=\"!hasValidSelection\"\n                        color=\"primary\"\n                        small\n                        style=\"width: 100%;\"\n                      >\n                        <v-icon small>mdi-chevron-right</v-icon>\n                        {{ $t('Use this location') }}\n                      </v-btn>\n                    </div>\n                  </div>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-title>\n          <div style=\"height: 375px\">\n            <l-map class=\"black--text\" ref=\"myMap\" :center=\"mapCenter\" :zoom=\"defaultZoom\" style=\"width: 100%; height: 375px;\" :options=\"{zoomControl: false, minZoom: effectiveMinZoom, maxZoom: effectiveMaxZoom}\">\n              <l-control-zoom position=\"topright\"></l-control-zoom>\n              <l-tile-layer :url=\"url\" attribution='&copy; <a target=\"_blank\" rel=\"noopener\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'></l-tile-layer>\n              <l-marker :key=\"loc.id || 'marker-' + index\"\n                  v-for=\"(loc, index) in validKnownLocations\"\n                  :lat-lng=\"[ loc.lat, loc.lng ]\"\n                  :clickable=\"true\"\n                  :opacity=\"(!pickLocationMode && selectedKnownLocation && selectedKnownLocation === loc ? 1.0 : 0.25)\"\n                  @click=\"selectKnownLocation(loc)\"\n                  :draggable=\"!pickLocationMode && selectedKnownLocation && selectedKnownLocation === loc\" \n                  @dragend=\"dragEnd\"\n                >\n                  <l-tooltip>\n                    <div class=\"black--text\">\n                      <strong>{{ loc.short_name }}</strong><br>\n                      <span v-if=\"loc.city && loc.city !== $t('locationMgr.unknownCity')\">{{ loc.city }}<span v-if=\"loc.state\">, {{ loc.state }}</span><br></span>\n                      {{ loc.country }}<br>\n                      {{ $t('locationMgr.coordinates') }}: {{ loc.lat.toFixed(4) }}, {{ loc.lng.toFixed(4) }}<br>\n                      <small style=\"color: #666;\">\n                        <span v-if=\"!pickLocationMode && selectedKnownLocation && selectedKnownLocation === loc\">{{ $t('locationMgr.dragToMove') }}</span>\n                        <span v-else>{{ $t('locationMgr.clickToSelect') }}</span>\n                      </small>\n                    </div>\n                  </l-tooltip>\n                </l-marker>\n              <l-circle v-if=\"startLocation && isValidLocation(startLocation)\"\n                :lat-lng=\"[ startLocation.lat, startLocation.lng ]\"\n                :radius=\"startLocation.accuracy || 100\"\n                :options=\"{\n                  strokeColor: '#0000FF',\n                  strokeOpacity: 0.5,\n                  strokeWeight: 1,\n                  fillColor: '#0000FF',\n                  fillOpacity: 0.08}\"></l-circle>\n              <l-marker v-if=\"shouldShowPickLocation\" \n                :lat-lng=\"[ pickLocation.lat, pickLocation.lng ]\"\n                :draggable=\"true\" \n                @dragend=\"dragEnd\">\n                <l-tooltip>\n                  <div class=\"black--text\">\n                    <strong>{{ pickLocation.short_name }}</strong><br>\n                    <span v-if=\"pickLocation.city && pickLocation.city !== $t('locationMgr.unknownCity')\">{{ pickLocation.city }}<span v-if=\"pickLocation.state\">, {{ pickLocation.state }}</span><br></span>\n                    <span v-if=\"pickLocation.country && pickLocation.country !== $t('locationMgr.unknown')\">{{ pickLocation.country }}<br></span>\n                    {{ $t('locationMgr.coordinates') }}: {{ pickLocation.lat.toFixed(4) }}, {{ pickLocation.lng.toFixed(4) }}<br>\n                    <small style=\"color: #666;\">{{ $t('locationMgr.dragToAdjust') }}</small>\n                  </div>\n                </l-tooltip>\n              </l-marker>\n            </l-map>\n          </div>\n        </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport swh from '@/assets/sw_helpers.js'\nimport { LMap, LTileLayer, LMarker, LCircle, LTooltip, LControlZoom } from 'vue2-leaflet'\nimport L from 'leaflet'\nimport MapConfig from '@/config/map-config.js'\n\nexport default {\n  data: function () {\n    return {\n      mode: 'pick',\n      pickLocation: undefined,\n      selectedKnownLocation: undefined,\n      mapCenter: [39.9042, 116.4074],\n      url: process.env.NODE_ENV === 'production' ? '/tiles/{z}/{x}/{y}.png' : 'http://localhost:8080/tiles/{z}/{x}/{y}.png',\n      fallbackUrl: '/tiles/{z}/{x}/{y}.png',\n      serverUrl: 'http://localhost:8080/tiles/{z}/{x}/{y}.png',\n      onlineUrl: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      // \n      minZoom: MapConfig.zoom.offline.min,\n      maxZoom: MapConfig.zoom.offline.max,\n      defaultZoom: MapConfig.zoom.offline.default,\n      // \n      geoCodeLoading: false,\n      // \n      useOnlineMap: true,              // \n      isOnlineMapAvailable: false,     // \n      isNetworkConnected: false,       // \n      currentMapType: 'checking',      // : 'online', 'offline', 'checking'\n      networkCheckInterval: null,      // \n      // \n      currentRequestId: 0,\n      abortController: null\n    }\n  },\n  props: ['showMyLocation', 'knownLocations', 'startLocation', 'realLocation'],\n  computed: {\n    doShowMyLocation: function () {\n      return this.showMyLocation === undefined ? false : this.showMyLocation\n    },\n    pickLocationMode: function () {\n      return this.mode === 'pick'\n    },\n    knownLocationMode: function () {\n      return this.mode === 'known'\n    },\n    locationForDetail: function () {\n      let location = null\n      \n      if (this.pickLocationMode && this.pickLocation === undefined) {\n        location = this.startLocation\n      } else {\n        location = this.pickLocationMode ? this.pickLocation : this.selectedKnownLocation\n      }\n      \n      // \n      if (location && this.isValidLocation(location)) {\n        const sanitized = this.sanitizeLocation(location)\n        if (sanitized) {\n          return sanitized\n        }\n      }\n      \n      // \n      return {\n        lat: 39.9042,\n        lng: 116.4074,\n        accuracy: 1000,\n        short_name: this.$t('locationMgr.beijing'),\n        country: this.$t('locationMgr.china'),\n        street_address: this.$t('locationMgr.beijingCity'),\n        city: this.$t('locationMgr.beijingCity'),\n        state: this.$t('locationMgr.beijingCity'),\n        postcode: ''\n      }\n    },\n    // \n    effectiveMinZoom: function () {\n      // \n      if (this.currentMapType === 'online') {\n        return MapConfig.zoom.online.min  // 01\n      } else {\n        return MapConfig.zoom.offline.min  // \n      }\n    },\n    effectiveMaxZoom: function () {\n      // \n      if (this.currentMapType === 'online') {\n        return MapConfig.zoom.online.max  // 1819\n      } else {\n        return MapConfig.zoom.offline.max  // \n      }\n    },\n    validKnownLocations: function () {\n      if (!this.knownLocations || !Array.isArray(this.knownLocations) || this.knownLocations.length === 0) {\n        // \n        return []\n      }\n      \n      const validLocations = this.knownLocations.filter(this.isValidLocation)\n      return validLocations\n    },\n    // pickLocation\n    shouldShowPickLocation: function () {\n      // pickLocationModepickLocation\n      return this.pickLocationMode && \n             this.pickLocation && \n             this.isValidLocation(this.pickLocation)\n    },\n    hasValidSelection: function () {\n      // \n      if (this.selectedKnownLocation) {\n        return true // \n      }\n      \n      if (this.pickLocation && this.isValidLocation(this.pickLocation)) {\n        // \"\"\"\"\n        if (this.pickLocation.short_name === this.$t('locationMgr.dragToSelectPin') || \n            this.pickLocation.country === this.$t('locationMgr.defaultLocation')) {\n          return false\n        }\n        return true\n      }\n      \n      return false\n    }\n  },\n  watch: {\n    startLocation: function (newLocation) {\n      if (this.isValidLocation(newLocation)) {\n        this.setPickLocation(newLocation)\n      } else {\n        console.warn('Invalid startLocation received:', newLocation)\n      }\n    }\n  },\n  created() {\n    this.$bus.$on('updateMapPosition', this.updateMapPosition);\n  },\n  mounted: function () {\n    const that = this\n    \n    // Leaflet\n    this.fixLeafletIcons()\n    \n    // startLocationpickLocation\n    if (this.startLocation && this.isValidLocation(this.startLocation)) {\n      this.setPickLocation(this.startLocation)\n    } else {\n      // startLocationpickLocation\n      this.pickLocation = {\n        lat: 39.9042,\n        lng: 116.4074,\n        accuracy: 0,\n        short_name: this.$t('locationMgr.dragToSelectPin'),\n        country: this.$t('locationMgr.defaultLocation'),\n        street_address: this.$t('locationMgr.dragPinToTarget')\n      }\n      this.setPickLocationMode()\n    }\n    \n    // \n    this.startNetworkMonitoring()\n    \n    // \n    this.detectAndSetMapType()\n    \n    this.$nextTick(() => {\n      const map = this.$refs.myMap.mapObject\n      map._onResize()\n\n      // \n      this.updateZoomLimits(map)\n    })\n  },\n  beforeDestroy: function () {\n    // \n    if (this.networkCheckInterval) {\n      clearInterval(this.networkCheckInterval)\n    }\n    \n    // \n    if (this.abortController) {\n      this.abortController.abort()\n      console.log('')\n    }\n    \n    // \n    window.removeEventListener('online', this.detectAndSetMapType)\n    window.removeEventListener('offline', this.detectAndSetMapType)\n  },\n  methods: {\n    selectKnownLocation: function (loc) {\n      this.selectedKnownLocation = loc\n      this.setKnownLocationMode()\n      this.mapCenter = [loc.lat, loc.lng]\n    },\n    useLocation: function () {\n      console.log('useLocation:', this.locationForDetail.lat, this.locationForDetail.lng)\n      this.$bus.$emit('locationSelected', this.locationForDetail)\n      const lat = parseFloat(this.locationForDetail.lat.toFixed(3))\n      const lng = parseFloat(this.locationForDetail.lng.toFixed(3))\n      this.$bus.$emit('resetLocation', lat, lng,false)\n    },\n    setPickLocationMode: function () {\n      this.mode = 'pick'\n    },\n    setKnownLocationMode: function () {\n      this.mode = 'known'\n    },\n    setPickLocation: function (loc) {\n      // \n      if (!this.isValidLocation(loc)) {\n        console.warn('Invalid location data received:', loc)\n        // \n        return\n      }\n      \n      // \n      const sanitizedLoc = this.sanitizeLocation(loc)\n      \n      if (sanitizedLoc.accuracy < 100) {\n        for (const l of this.knownLocations) {\n          if (this.isValidLocation(l)) {\n            const d = swh.getDistanceFromLatLonInM(l.lat, l.lng, sanitizedLoc.lat, sanitizedLoc.lng)\n            if (d < 100) {\n              this.selectKnownLocation(l)\n              return\n            }\n          }\n        }\n      }\n      \n      // \n      this.mapCenter = [sanitizedLoc.lat, sanitizedLoc.lng]\n      this.pickLocation = sanitizedLoc\n      this.setPickLocationMode()\n    },\n    // Called when the user clicks on the small cross button\n    centerOnRealPosition: function () {\n      this.setPickLocation(this.realLocation)\n    },\n    \n    // \n    updateMapPosition: function (lat, lng, options = {}) {\n      console.log(':', lat, lng, options)\n      \n      // \n      if (typeof lat !== 'number' || typeof lng !== 'number' || \n          isNaN(lat) || isNaN(lng) || \n          lat < -90 || lat > 90 || lng < -180 || lng > 180) {\n        console.error(':', { lat, lng })\n        return false\n      }\n      \n      // \n      const defaultOptions = {\n        updateMarker: true,        // \n        fetchAddress: true,        // \n        zoom: null,               // \n        animate: true,            // \n        accuracy: 0               // \n      }\n      \n      const config = Object.assign({}, defaultOptions, options)\n      \n      try {\n        // \n        if (config.animate && this.$refs.myMap && this.$refs.myMap.mapObject) {\n          // \n          const map = this.$refs.myMap.mapObject\n          const targetZoom = config.zoom || map.getZoom()\n          map.flyTo([lat, lng], targetZoom, {\n            duration: 1.5,  // \n            easeLinearity: 0.1\n          })\n        } else {\n          // \n          this.mapCenter = [lat, lng]\n          \n          // \n          if (config.zoom && this.$refs.myMap && this.$refs.myMap.mapObject) {\n            this.$nextTick(() => {\n              this.$refs.myMap.mapObject.setZoom(config.zoom)\n            })\n          }\n        }\n        \n        // \n        if (config.updateMarker) {\n          const newLocation = {\n            lat: lat,\n            lng: lng,\n            accuracy: config.accuracy,\n            short_name: config.fetchAddress ? this.$t('locationMgr.fetchingLocationInfo') : this.$t('locationMgr.newLocation'),\n            country: config.fetchAddress ? this.$t('locationMgr.pleaseWait') : this.$t('locationMgr.unknown'),\n            street_address: `${this.$t('locationMgr.coordinates')}: ${lat.toFixed(6)}, ${lng.toFixed(6)}`\n          }\n          \n          // \n          if (this.pickLocationMode) {\n            this.pickLocation = newLocation\n            this.setPickLocationMode()\n          } else {\n            // \n            this.pickLocation = newLocation\n            this.setPickLocationMode()\n          }\n          \n          // \n          if (config.fetchAddress) {\n            this.requestLocationInfo(lat, lng)\n          }\n        }\n        \n        // \n        this.$emit('mapPositionUpdated', { lat, lng, options: config })\n        \n        console.log(':', { lat, lng, config })\n        return true\n        \n      } catch (error) {\n        console.error(':', error)\n        return false\n      }\n    },\n    \n    // \n    requestLocationInfo: function (lat, lng) {\n      // ID\n      const requestId = ++this.currentRequestId\n      \n      // \n      setTimeout(() => {\n        // \n        if (requestId !== this.currentRequestId) {\n          console.log('')\n          return\n        }\n        \n        // \n        this.getCityInfo({ lat, lng }, requestId).then(cityInfo => {\n          // \n          if (requestId !== this.currentRequestId) {\n            console.log('')\n            return\n          }\n          \n          const updatedPos = {\n            lat: lat,\n            lng: lng,\n            accuracy: this.pickLocation?.accuracy || 0,\n            ...cityInfo\n          }\n          \n          // \n          if (this.pickLocationMode && this.pickLocation) {\n            Object.assign(this.pickLocation, updatedPos)\n            this.$forceUpdate()\n          }\n          \n          console.log(':', updatedPos)\n          \n          // \n          this.$emit('addressInfoUpdated', updatedPos)\n          \n        }).catch(error => {\n          // \n          if (error.name === 'AbortError') {\n            console.log('')\n            return\n          }\n          \n          // \n          if (requestId !== this.currentRequestId) {\n            console.log('')\n            return\n          }\n          \n          console.error(':', error)\n          \n          // \n          const errorLocationInfo = {\n            lat: lat,\n            lng: lng,\n            accuracy: this.pickLocation?.accuracy || 0,\n            short_name: this.$t('locationMgr.fetchLocationFailed'),\n            country: this.$t('locationMgr.unknownRegion'),\n            street_address: `${this.$t('locationMgr.coordinates')}: ${lat.toFixed(6)}, ${lng.toFixed(6)}`\n          }\n          \n          if (this.pickLocationMode && this.pickLocation) {\n            Object.assign(this.pickLocation, errorLocationInfo)\n            this.$forceUpdate()\n          }\n          \n          // \n          this.$emit('addressInfoError', { lat, lng, error: error.message })\n        })\n      }, 100) // 100ms\n    },\n    checkTileAvailability: function () {\n      const that = this\n      \n      // \n      if (process.env.NODE_ENV === 'production') {\n        that.testStaticTiles().then(isAvailable => {\n          if (isAvailable) {\n            console.log('')\n            that.url = that.fallbackUrl\n          } else {\n            console.log('tile')\n            that.testTileServer()\n          }\n        })\n      } else {\n        // tile\n        that.testTileServer()\n      }\n    },\n    \n    testStaticTiles: function () {\n      const that = this\n      return new Promise((resolve) => {\n        // \n        const testUrls = [\n          '/tiles/0/0/0.png',\n          '/tiles/1/0/0.png',\n          '/tiles/2/1/1.png'\n        ]\n        \n        let testCount = 0\n        let successCount = 0\n        \n        testUrls.forEach(url => {\n          fetch(url, { method: 'HEAD' })\n            .then(response => {\n              testCount++\n              if (response.ok) {\n                successCount++\n              }\n              \n              if (testCount === testUrls.length) {\n                // \n                resolve(successCount >= testUrls.length / 2)\n              }\n            })\n            .catch(() => {\n              testCount++\n              if (testCount === testUrls.length) {\n                resolve(successCount >= testUrls.length / 2)\n              }\n            })\n        })\n        \n        // \n        setTimeout(() => {\n          if (testCount < testUrls.length) {\n            resolve(false)\n          }\n        }, 2000)\n      })\n    },\n    \n    testTileServer: function () {\n      const that = this\n      \n      // tile\n      const testUrl = this.serverUrl.replace('{z}', '0').replace('{x}', '0').replace('{y}', '0')\n      \n      fetch(testUrl, { method: 'HEAD', timeout: 3000 })\n        .then(response => {\n          if (response.ok) {\n            console.log('tile')\n            that.url = that.serverUrl\n          } else {\n            throw new Error('tile')\n          }\n        })\n        .catch(error => {\n          console.log('tile:', error)\n          that.url = that.fallbackUrl\n          \n          // \n          that.testStaticTiles().then(isAvailable => {\n            if (!isAvailable && process.env.NODE_ENV === 'development') {\n              console.log('')\n              that.url = that.onlineUrl\n            }\n          })\n        })\n    },\n    updateZoomLimits: function (map) {\n      const that = this\n      \n      // \n      map.setMinZoom(this.effectiveMinZoom)\n      map.setMaxZoom(this.effectiveMaxZoom)\n      \n      console.log(`: ${this.effectiveMinZoom} - ${this.effectiveMaxZoom} (${this.currentMapType})`)\n      \n      // \n      if (this.currentMapType === 'offline' && process.env.NODE_ENV === 'production') {\n        this.detectAvailableTileLevels().then(levels => {\n          if (levels.min !== null && levels.max !== null) {\n            map.setMinZoom(levels.min)\n            map.setMaxZoom(levels.max)\n            console.log(`: ${levels.min} - ${levels.max}`)\n          }\n        })\n      }\n    },\n    \n    detectAvailableTileLevels: function () {\n      const that = this\n      return new Promise((resolve) => {\n        const testLevels = MapConfig.detection.testLevels\n        let availableLevels = []\n        let testCount = 0\n        \n        testLevels.forEach(level => {\n          const testUrl = `/tiles/${level}/0/0.png`\n          \n          fetch(testUrl, { method: 'HEAD' })\n            .then(response => {\n              testCount++\n              if (response.ok) {\n                availableLevels.push(level)\n              }\n              \n              if (testCount === testLevels.length) {\n                availableLevels.sort((a, b) => a - b)\n                resolve({\n                  min: availableLevels.length > 0 ? availableLevels[0] : null,\n                  max: availableLevels.length > 0 ? availableLevels[availableLevels.length - 1] : null,\n                  available: availableLevels\n                })\n              }\n            })\n            .catch(() => {\n              testCount++\n              if (testCount === testLevels.length) {\n                availableLevels.sort((a, b) => a - b)\n                resolve({\n                  min: availableLevels.length > 0 ? availableLevels[0] : null,\n                  max: availableLevels.length > 0 ? availableLevels[availableLevels.length - 1] : null,\n                  available: availableLevels\n                })\n              }\n            })\n        })\n        \n        // \n        setTimeout(() => {\n          if (testCount < testLevels.length) {\n            resolve({ \n              min: MapConfig.zoom.offline.min, \n              max: MapConfig.zoom.offline.max, \n              available: [] \n            })\n          }\n        }, MapConfig.detection.timeout)\n      })\n    },\n    isValidLocation: function (location) {\n      if (!location) {\n        console.debug(': ')\n        return false\n      }\n      \n      // \n      if (typeof location.lat === 'undefined' || typeof location.lng === 'undefined') {\n        console.debug(': latlng', location)\n        return false\n      }\n      \n      // \n      const lat = parseFloat(location.lat)\n      const lng = parseFloat(location.lng)\n      \n      if (isNaN(lat) || isNaN(lng)) {\n        console.debug(': ', { lat: location.lat, lng: location.lng, parsedLat: lat, parsedLng: lng })\n        return false\n      }\n      \n      // \n      if (lat < -90 || lat > 90 || lng < -180 || lng > 180) {\n        console.debug(': ', { lat, lng })\n        return false\n      }\n      \n      // \n      if (lat === 0 && lng === 0) {\n        console.debug(': (0,0)')\n        return false\n      }\n      \n      return true\n    },\n    sanitizeLocation: function (location) {\n      if (!location) {\n        console.debug(': ')\n        return null\n      }\n      \n      // \n      const lat = parseFloat(location.lat)\n      const lng = parseFloat(location.lng)\n      \n      if (isNaN(lat) || isNaN(lng)) {\n        console.debug(': ', location)\n        return null\n      }\n      \n      const sanitized = {\n        lat: Math.max(-90, Math.min(90, lat)),     // \n        lng: Math.max(-180, Math.min(180, lng)),   // \n        accuracy: parseFloat(location.accuracy) || 100,\n        short_name: location.short_name || this.$t('locationMgr.unknownLocation'),\n        country: location.country || this.$t('locationMgr.unknownCountry'),\n        street_address: location.street_address || '',\n        city: location.city || this.$t('locationMgr.unknownCity'),\n        state: location.state || '',\n        postcode: location.postcode || ''\n      }\n      \n      // \n      if (!this.isValidLocation(sanitized)) {\n        console.debug(': ', sanitized)\n        return null\n      }\n      \n      return sanitized\n    },\n    fixLeafletIcons: function () {\n      // Leaflet\n      L.Icon.Default.imagePath = 'https://unpkg.com/leaflet@1.7.1/dist/images/'\n      \n      // \n      this.$nextTick(() => {\n        if (this.$refs.myMap && this.$refs.myMap.mapObject) {\n          const map = this.$refs.myMap.mapObject\n          // \n          map.options.touchZoom = true\n          map.options.touchPan = true\n        }\n      })\n    },\n    getCityInfo: function (position, requestId) {\n      // \n      this.geoCodeLoading = true\n      \n      // AbortController\n      const abortController = new AbortController()\n      this.abortController = abortController\n      \n      // \n      if (this.currentMapType === 'online') {\n        return this.getOnlineGeocodingInfo(position, abortController)\n      } else {\n        return this.getOfflineGeocodingInfo(position)\n      }\n    },\n    \n    // \n    getOnlineGeocodingInfo: function (position, abortController) {\n      console.log('')\n      \n      // \n      const tryGeocoding = async () => {\n        // 1: JSONPCORS\n        // 2: \n        // 3: \n        \n        const services = [\n          {\n            name: 'BigDataCloud-API',\n            url: `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${position.lat}&longitude=${position.lng}&localityLanguage=zh-CN`,\n            method: 'fetch-cors'\n          },\n          {\n            name: 'OpenCage-Demo',\n            url: `https://api.opencagedata.com/geocode/v1/json?q=${position.lat}+${position.lng}&key=demo&language=zh-CN&pretty=1&no_annotations=1`,\n            method: 'fetch-cors'\n          }\n        ]\n        \n        for (const service of services) {\n          try {\n            console.log(`${service.name}...`)\n            \n            let data\n            if (service.method === 'jsonp') {\n              // JSONP\n              data = await this.fetchWithJSONP(service.url, 8000)\n            } else if (service.method === 'fetch-cors') {\n              // CORSAPI\n              const response = await fetch(service.url, {\n                signal: abortController.signal,\n                mode: 'cors',\n                credentials: 'omit'\n              })\n              \n              if (!response.ok) {\n                throw new Error(`${service.name} HTTP ${response.status}`)\n              }\n              \n              data = await response.json()\n            } else {\n              // fetch\n              const response = await fetch(service.url, {\n                headers: service.headers || {},\n                signal: abortController.signal,\n                mode: 'cors',\n                credentials: 'omit'\n              })\n              \n              if (!response.ok) {\n                throw new Error(`${service.name} HTTP ${response.status}`)\n              }\n              \n              data = await response.json()\n            }\n            \n            console.log(`${service.name}:`, data)\n            \n            // \n            let cityInfo\n            if (service.name.includes('BigDataCloud')) {\n              // BigDataCloud API\n              if (data && data.city) {\n                cityInfo = {\n                  short_name: this.formatBigDataCloudLocationName(data),\n                  country: data.countryName || this.$t('locationMgr.unknownCountry'),\n                  street_address: data.locality || data.city || this.$t('locationMgr.unknownAddress'),\n                  city: data.city || data.locality || this.$t('locationMgr.unknownCity'),\n                  state: data.principalSubdivision || '',\n                  postcode: data.postcode || ''\n                }\n              }\n            } else if (service.name.includes('OpenCage')) {\n              // OpenCage API\n              if (data && data.results && data.results.length > 0) {\n                const result = data.results[0]\n                const components = result.components || {}\n                cityInfo = {\n                  short_name: this.formatOpenCageLocationName(components),\n                  country: components.country || this.$t('locationMgr.unknownCountry'),\n                  street_address: result.formatted || this.$t('locationMgr.unknownAddress'),\n                  city: components.city || components.town || components.village || components.county || this.$t('locationMgr.unknownCity'),\n                  state: components.state || components.province || '',\n                  postcode: components.postcode || ''\n                }\n              }\n            } else {\n              // Nominatim\n              if (data && (data.display_name || data.name)) {\n                const address = data.address || {}\n                cityInfo = {\n                  short_name: this.formatLocationName(address),\n                  country: address.country || this.$t('locationMgr.unknownCountry'),\n                  street_address: data.display_name || data.name || this.$t('locationMgr.unknownAddress'),\n                  city: address.city || address.town || address.village || address.county || this.$t('locationMgr.unknownCity'),\n                  state: address.state || address.province || '',\n                  postcode: address.postcode || ''\n                }\n              }\n            }\n            \n            if (cityInfo) {\n              console.log(`${service.name}`)\n              return cityInfo\n            } else {\n              throw new Error(`${service.name}`)\n            }\n          } catch (error) {\n            console.warn(`${service.name}:`, error.message)\n            \n            // \n            if (error.name === 'AbortError') {\n              throw error\n            }\n            \n            // \n            continue\n          }\n        }\n        \n        // \n        console.log('')\n        throw new Error('')\n      }\n      \n      // Promise\n      const timeoutPromise = new Promise((_, reject) => {\n        setTimeout(() => reject(new Error('')), 6000) // 6\n      })\n      \n      return Promise.race([tryGeocoding(), timeoutPromise])\n      .catch(error => {\n        console.warn(':', error.message)\n        \n        // \n        if (error.name === 'AbortError') {\n          throw error\n        }\n        \n        // \n        return this.generateOfflineLocationInfo(position)\n      })\n      .finally(() => {\n        // \n        this.geoCodeLoading = false\n        if (this.abortController === abortController) {\n          this.abortController = null\n        }\n      })\n    },\n    \n    // JSONP\n    fetchWithJSONP: function (url, timeout = 8000) {\n      return new Promise((resolve, reject) => {\n        const callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random())\n        const script = document.createElement('script')\n        \n        // \n        const timeoutId = setTimeout(() => {\n          cleanup()\n          reject(new Error('JSONP'))\n        }, timeout)\n        \n        // \n        const cleanup = () => {\n          if (script.parentNode) {\n            script.parentNode.removeChild(script)\n          }\n          if (window[callbackName]) {\n            delete window[callbackName]\n          }\n          clearTimeout(timeoutId)\n        }\n        \n        // \n        window[callbackName] = (data) => {\n          cleanup()\n          resolve(data)\n        }\n        \n        // \n        script.onerror = () => {\n          cleanup()\n          reject(new Error('JSONP'))\n        }\n        \n        //  - \n        const finalUrl = url.replace('CALLBACK_PLACEHOLDER', callbackName)\n        script.src = finalUrl\n        console.log('JSONPURL:', finalUrl)\n        document.head.appendChild(script)\n      })\n    },\n    \n    // \n    getOfflineGeocodingInfo: function (position) {\n      console.log('')\n      \n      return new Promise((resolve) => {\n        // \n        setTimeout(() => {\n          // \n          const cityInfo = this.generateOfflineLocationInfo(position)\n          \n          console.log(':', cityInfo.short_name)\n          resolve(cityInfo)\n        }, 200) // 200ms\n      })\n      .finally(() => {\n        // \n        this.geoCodeLoading = false\n        this.abortController = null\n      })\n    },\n    generateOfflineLocationInfo: function (position) {\n      const lat = position.lat\n      const lng = position.lng\n      \n      // \n      let regionInfo = this.determineRegion(lat, lng)\n      \n      // \n      const locationName = `${regionInfo.region}`\n      \n      return {\n        short_name: locationName,\n        country: regionInfo.country,\n        street_address: `: ${lat.toFixed(6)}, ${lng.toFixed(6)}`,\n        city: regionInfo.city,\n        state: regionInfo.state,\n        postcode: ''\n      }\n    },\n    \n    determineRegion: function (lat, lng) {\n      // \n      \n      // \n      if (lat >= 18 && lat <= 54 && lng >= 73 && lng <= 135) {\n        if (lat >= 39.4 && lat <= 41.1 && lng >= 115.4 && lng <= 117.5) {\n          return { region: this.$t('locationMgr.beijing'), country: this.$t('locationMgr.china'), city: this.$t('locationMgr.beijingCity'), state: this.$t('locationMgr.beijingCity') }\n        } else if (lat >= 30.8 && lat <= 31.9 && lng >= 120.9 && lng <= 122.0) {\n          return { region: this.$t('locationMgr.shanghai'), country: this.$t('locationMgr.china'), city: this.$t('locationMgr.shanghaiCity'), state: this.$t('locationMgr.shanghaiCity') }\n        } else if (lat >= 22.4 && lat <= 23.6 && lng >= 113.8 && lng <= 114.6) {\n          return { region: this.$t('locationMgr.shenzhen'), country: this.$t('locationMgr.china'), city: this.$t('locationMgr.shenzhenCity'), state: this.$t('locationMgr.guangdongProvince') }\n        } else if (lat >= 30.1 && lat <= 30.9 && lng >= 103.9 && lng <= 104.9) {\n          return { region: this.$t('locationMgr.chengdu'), country: this.$t('locationMgr.china'), city: this.$t('locationMgr.chengduCity'), state: this.$t('locationMgr.sichuanProvince') }\n        } else if (lat >= 22.0 && lat <= 23.6 && lng >= 112.9 && lng <= 114.0) {\n          return { region: this.$t('locationMgr.guangzhou'), country: this.$t('locationMgr.china'), city: this.$t('locationMgr.guangzhouCity'), state: this.$t('locationMgr.guangdongProvince') }\n        } else {\n          return { region: this.$t('locationMgr.china'), country: this.$t('locationMgr.china'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownProvince') }\n        }\n      }\n      \n      // /\n      if (lat >= 24.5 && lat <= 49.4 && lng >= -125 && lng <= -66) {\n        return { region: this.$t('locationMgr.usa'), country: this.$t('locationMgr.usa'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownState') }\n      } else if (lat >= 45.8 && lat <= 71.0 && lng >= -141 && lng <= -52) {\n        return { region: this.$t('locationMgr.canada'), country: this.$t('locationMgr.canada'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownProvince') }\n      } else if (lat >= 35.8 && lat <= 45.6 && lng >= 138.7 && lng <= 146.0) {\n        return { region: this.$t('locationMgr.japan'), country: this.$t('locationMgr.japan'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownPrefecture') }\n      } else if (lat >= 33.0 && lat <= 38.6 && lng >= 124.6 && lng <= 130.9) {\n        return { region: this.$t('locationMgr.korea'), country: this.$t('locationMgr.korea'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownProvince') }\n      } else if (lat >= 36.0 && lat <= 71.2 && lng >= -11.0 && lng <= 32.0) {\n        return { region: this.$t('locationMgr.europe'), country: this.$t('locationMgr.europe'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownRegion') }\n      }\n      \n      // \n      if (lat >= -55 && lat <= 71) {\n        if (lng >= -168 && lng <= -30) {\n          return { region: this.$t('locationMgr.americas'), country: this.$t('locationMgr.americas'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownRegion') }\n        } else if (lng >= -11 && lng <= 180) {\n          if (lat >= -47 && lng >= 110) {\n            return { region: this.$t('locationMgr.oceania'), country: this.$t('locationMgr.oceania'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownRegion') }\n          } else {\n            return { region: this.$t('locationMgr.asia'), country: this.$t('locationMgr.asia'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownRegion') }\n          }\n        }\n      } else if (lat >= -55 && lat <= 37 && lng >= -20 && lng <= 55) {\n        return { region: this.$t('locationMgr.africa'), country: this.$t('locationMgr.africa'), city: this.$t('locationMgr.unknownCity'), state: this.$t('locationMgr.unknownRegion') }\n      }\n      \n      // \n      return { \n        region: this.$t('locationMgr.unknown'), \n        country: this.$t('locationMgr.unknownRegion'), \n        city: this.$t('locationMgr.unknownCity'), \n        state: this.$t('locationMgr.unknownRegion') \n      }\n    },\n    formatLocationName: function (address) {\n      // \n      const city = address.city || address.town || address.village || address.county\n      const state = address.state || address.province\n      const country = address.country\n      \n      if (city && state) {\n        return `${city}, ${state}`\n      } else if (city) {\n        return city\n      } else if (state) {\n        return state\n      } else if (country) {\n        return country\n      } else {\n        return this.$t('locationMgr.unknownLocation')\n      }\n    },\n    formatBigDataCloudLocationName: function (data) {\n      // BigDataCloud API\n      const city = data.city || data.locality\n      const state = data.principalSubdivision\n      const country = data.countryName\n      \n      if (city && state) {\n        return `${city}, ${state}`\n      } else if (city) {\n        return city\n      } else if (state) {\n        return state\n      } else if (country) {\n        return country\n      } else {\n        return this.$t('locationMgr.unknownLocation')\n      }\n    },\n    formatOpenCageLocationName: function (components) {\n      // OpenCage API\n      const city = components.city || components.town || components.village || components.county\n      const state = components.state || components.province\n      const country = components.country\n      \n      if (city && state) {\n        return `${city}, ${state}`\n      } else if (city) {\n        return city\n      } else if (state) {\n        return state\n      } else if (country) {\n        return country\n      } else {\n        return this.$t('locationMgr.unknownLocation')\n      }\n    },\n    getMapStatusColor: function () {\n      switch (this.currentMapType) {\n        case 'online':\n          return 'green'\n        case 'offline':\n          return this.useOnlineMap ? 'orange' : 'blue'\n        case 'checking':\n          return 'grey'\n        default:\n          return 'red'\n      }\n    },\n    getMapStatusIcon: function () {\n      switch (this.currentMapType) {\n        case 'online':\n          return 'mdi-cloud-check'\n        case 'offline':\n          return 'mdi-cloud-off'\n        case 'checking':\n          return 'mdi-loading mdi-spin'\n        default:\n          return 'mdi-alert-circle'\n      }\n    },\n    getMapStatusText: function () {\n      switch (this.currentMapType) {\n        case 'online':\n          return this.$t('locationMgr.onlineMap')\n        case 'offline':\n          return this.useOnlineMap ? this.$t('locationMgr.offlineMapFallback') : this.$t('locationMgr.offlineMap')\n        case 'checking':\n          return this.$t('locationMgr.checking')\n        default:\n          return this.$t('locationMgr.connectionFailed')\n      }\n    },\n    onMapTypeToggle: function () {\n      // \n      console.log(':', this.useOnlineMap ? '' : '')\n      \n      if (this.useOnlineMap) {\n        // \n        this.detectAndSetMapType()\n      } else {\n        // \n        this.currentMapType = 'offline'\n        this.url = this.fallbackUrl\n        console.log(' ')\n        \n        // \n        this.$nextTick(() => {\n          if (this.$refs.myMap && this.$refs.myMap.mapObject) {\n            const map = this.$refs.myMap.mapObject\n            map.invalidateSize()\n            this.updateZoomLimits(map)\n          }\n        })\n      }\n    },\n    \n    // \n    checkNetworkConnection: function () {\n      return new Promise((resolve) => {\n        // 1: navigator.onLine\n        if (!navigator.onLine) {\n          console.log(': navigator.onLinefalse')\n          resolve(false)\n          return\n        }\n        \n        // 2: \n        const testUrls = [\n          // \n          'https://nominatim.openstreetmap.org/reverse?format=json&lat=40&lon=116&accept-language=en',\n          // \n          'https://www.openstreetmap.org/favicon.ico'\n        ]\n        \n        let completed = 0\n        let hasSuccess = false\n        const timeout = 3000 // 3\n        \n        testUrls.forEach((url, index) => {\n          // fetch\n          const controller = new AbortController()\n          const timeoutId = setTimeout(() => controller.abort(), timeout)\n          \n          fetch(url, {\n            method: 'HEAD',\n            mode: 'no-cors', // CORS\n            signal: controller.signal,\n            cache: 'no-cache'\n          })\n          .then(() => {\n            clearTimeout(timeoutId)\n            if (!hasSuccess) {\n              hasSuccess = true\n              console.log(`: ${url} `)\n              resolve(true)\n            }\n          })\n          .catch(error => {\n            clearTimeout(timeoutId)\n            completed++\n            console.log(`: ${url} :`, error.name)\n            if (completed === testUrls.length && !hasSuccess) {\n              console.log(': ')\n              resolve(false)\n            }\n          })\n        })\n        \n        // \n        setTimeout(() => {\n          if (!hasSuccess) {\n            console.log(': ')\n            resolve(false)\n          }\n        }, timeout + 500)\n      })\n    },\n    \n    // \n    checkOnlineMapAvailability: function () {\n      return new Promise((resolve) => {\n        const testUrls = [\n          'https://a.tile.openstreetmap.org/0/0/0.png',\n          'https://b.tile.openstreetmap.org/0/0/0.png',\n          'https://c.tile.openstreetmap.org/0/0/0.png'\n        ]\n        \n        let completed = 0\n        let hasSuccess = false\n        \n        testUrls.forEach(url => {\n          fetch(url, { \n            method: 'HEAD', \n            mode: 'no-cors',\n            cache: 'no-cache'\n          })\n          .then(() => {\n            if (!hasSuccess) {\n              hasSuccess = true\n              resolve(true)\n            }\n          })\n          .catch(() => {\n            completed++\n            if (completed === testUrls.length && !hasSuccess) {\n              resolve(false)\n            }\n          })\n        })\n        \n        // 3\n        setTimeout(() => {\n          if (!hasSuccess) {\n            resolve(false)\n          }\n        }, 3000)\n      })\n    },\n    \n    // \n    detectAndSetMapType: async function () {\n      this.currentMapType = 'checking'\n      console.log('...')\n      \n      try {\n        // \n        this.isNetworkConnected = await this.checkNetworkConnection()\n        console.log(':', this.isNetworkConnected)\n        \n        if (this.isNetworkConnected) {\n          // \n          this.isOnlineMapAvailable = await this.checkOnlineMapAvailability()\n          console.log(':', this.isOnlineMapAvailable)\n          \n          if (this.isOnlineMapAvailable) {\n            this.currentMapType = 'online'\n            this.url = this.onlineUrl\n            console.log(' ')\n          } else {\n            this.currentMapType = 'offline'\n            this.url = this.fallbackUrl\n            console.log(' ')\n          }\n        } else {\n          // \n          this.currentMapType = 'offline'\n          this.url = this.fallbackUrl\n          console.log(' ')\n        }\n        \n        // \n        this.$nextTick(() => {\n          if (this.$refs.myMap && this.$refs.myMap.mapObject) {\n            const map = this.$refs.myMap.mapObject\n            map.invalidateSize()\n            // \n            this.updateZoomLimits(map)\n          }\n        })\n        \n      } catch (error) {\n        console.error(':', error)\n        this.currentMapType = 'offline'\n        this.url = this.fallbackUrl\n        this.isNetworkConnected = false\n        this.isOnlineMapAvailable = false\n        console.log(' ')\n      }\n    },\n    \n    // \n    startNetworkMonitoring: function () {\n      // \n      window.addEventListener('online', () => {\n        console.log('')\n        // \n        if (this.useOnlineMap) {\n          this.detectAndSetMapType()\n        }\n      })\n      \n      window.addEventListener('offline', () => {\n        console.log('')\n        this.isNetworkConnected = false\n        this.isOnlineMapAvailable = false\n        this.currentMapType = 'offline'\n        this.url = this.fallbackUrl\n      })\n      \n      // \n      this.networkCheckInterval = setInterval(() => {\n        // \n        // 1. \n        // 2. \n        // 3. \n        if (this.useOnlineMap && \n            this.currentMapType === 'offline' && \n            navigator.onLine) {\n          console.log('')\n          this.detectAndSetMapType()\n        }\n      }, 60000) // 60\n    },\n    \n    // \n    dragEnd: function (event) {\n      const newPos = {\n        lat: event.target._latlng.lat,\n        lng: event.target._latlng.lng,\n        accuracy: 0\n      }\n      \n      console.log(':', newPos.lat.toFixed(6), newPos.lng.toFixed(6))\n      \n      // updateMapPosition\n      this.updateMapPosition(newPos.lat, newPos.lng, {\n        updateMarker: true,\n        fetchAddress: true,\n        animate: false,  // \n        accuracy: 0\n      })\n      \n      // \n      // this.$emit('resetLocation', newPos.lat, newPos.lng)\n    },\n    \n    // \n    flyToPosition: function (lat, lng, zoom = null) {\n      return this.updateMapPosition(lat, lng, {\n        animate: true,\n        zoom: zoom,\n        updateMarker: true,\n        fetchAddress: true\n      })\n    },\n    \n    // \n    setPosition: function (lat, lng, zoom = null) {\n      return this.updateMapPosition(lat, lng, {\n        animate: false,\n        zoom: zoom,\n        updateMarker: true,\n        fetchAddress: true\n      })\n    },\n    \n    // \n    centerMapAt: function (lat, lng, zoom = null, animate = true) {\n      return this.updateMapPosition(lat, lng, {\n        animate: animate,\n        zoom: zoom,\n        updateMarker: false,\n        fetchAddress: false\n      })\n    },\n    \n    \n    // \n    updateToKnownLocation: function (locationObj, animate = true) {\n      if (!locationObj || !this.isValidLocation(locationObj)) {\n        console.error(':', locationObj)\n        return false\n      }\n      \n      return this.updateMapPosition(locationObj.lat, locationObj.lng, {\n        animate: animate,\n        updateMarker: true,\n        fetchAddress: false,  // \n        accuracy: locationObj.accuracy || 0\n      })\n    }\n  },\n  components: { LMap, LTileLayer, LMarker, LCircle, LTooltip, LControlZoom }\n}\n</script>\n\n<style>\n.leaflet-control-geocoder-form input {\n  caret-color:#000 !important;\n  color: #000 !important;\n}\n\n/* Tooltip */\n.leaflet-tooltip {\n  font-size: 12px !important;\n  font-weight: 500 !important;\n}\n\n.leaflet-tooltip strong {\n  color: #ff9800 !important;\n}\n\n.leaflet-tooltip small {\n  font-style: italic;\n}\n\n/*  */\n.leaflet-marker-dragging {\n  transition: none !important;\n}\n</style>\n"],"sourceRoot":"src/components"}]}
